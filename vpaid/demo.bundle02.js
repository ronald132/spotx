!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(function(){return(()=>{var e={2241:function(e,t,n){var r,i;!function(o,u,a){"use strict";void 0===(i="function"==typeof(r=function(e,t){var n=(t||{})[e];function r(e,t,n){var r;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t&&!1===t.call(n,e[r],r,e))return;return e}function i(e,t,n){for(var r,i,o=e._pubsub_topics,u=o[t]?o[t].slice(0):[],a=0,s=u.length;a<s;a+=1){if(i=u[a].token,r=u[a],e._options.immediateExceptions)r.callback(n,{name:t,token:i});else try{r.callback(n,{name:t,token:i})}catch(e){setTimeout((function(){throw e}),0)}!0===r.once&&e.unsubscribe(i)}}function o(e){var t=Array.prototype.slice.call(e,1);return t.length<=1?t[0]:t}function u(e,t,n,r){return!!e._pubsub_topics[t]&&(r?i(e,t,n):setTimeout((function(){i(e,t,n)}),0),!0)}function a(e){return e=function(e){var t,n,r,i;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(t=Object(e),n=1;n<arguments.length;n++)if(null!=(r=arguments[n]))for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}({},{immediateExceptions:!1},e),this instanceof a?(this._pubsub_topics={},this._pubsub_uid=-1,this._options=e,this):new a(e)}return a.prototype.subscribe=function(e,t,n){var r=this._pubsub_topics,i=this._pubsub_uid+=1,o={};if("function"!=typeof t)throw new TypeError("When subscribing for an event, a callback function must be defined.");return r[e]||(r[e]=[]),o.token=i,o.callback=t,o.once=!!n,r[e].push(o),i},a.prototype.subscribeOnce=function(e,t){return this.subscribe(e,t,!0)},a.prototype.publish=function(e){return u(this,e,o(arguments),!1)},a.prototype.publishSync=function(e){return u(this,e,o(arguments),!0)},a.prototype.unsubscribe=function(e){var t,n,r=this._pubsub_topics,i=!1;for(t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&r[t]){for(n=r[t].length;n;){if(n-=1,r[t][n].token===e)return r[t].splice(n,1),0===r[t].length&&delete r[t],e;t===e&&(r[t].splice(n,1),0===r[t].length&&delete r[t],i=!0)}if(!0===i)return e}return!1},a.prototype.unsubscribeAll=function(){return this._pubsub_topics={},this},a.prototype.hasSubscribers=function(e){var t=this._pubsub_topics,n=!1;return null==e?(r(t,(function(e,t){if(t)return n=!0,!1})),n):Object.prototype.hasOwnProperty.call(t,e)},a.prototype.subscribers=function(){var e={};return r(this._pubsub_topics,(function(t,n){e[n]=t.slice(0)})),e},a.prototype.subscribersByTopic=function(e){return this._pubsub_topics[e]?this._pubsub_topics[e].slice(0):[]},a.prototype.alias=function(e){return r(e,(function(t,n){var r;a.prototype[n]&&(a.prototype[e[n]]=(r=n,function(){return this[r].apply(this,arguments)}))})),this},a.noConflict=function(){return t&&(t[e]=n),a},a})?r.call(t,n,t,e):r)||(e.exports=i)}()},8603:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(0,n(3269).Observable)(r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"destroy",value:function(){}},{key:"publish",value:function(){}},{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"duration",get:function(){return-2}},{key:"remaining",get:function(){return-2}},{key:"volume",set:function(e){}}]),e}())||r;t.default=o},3470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6028)),o=a(n(1526)),u=a(n(2333));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"generateTimeEvents",value:function(e){var t=e/4;return[new u.default(i.AD_VIDEO_FIRST_QUARTILE,t),new u.default(i.AD_VIDEO_MIDPOINT,2*t),new u.default(i.AD_VIDEO_THIRD_QUARTILE,3*t)]}}]),t}(o.default);t.default=c},2333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventName=t,this.eventTime=n,this.fired=!1}return n(e,[{key:"didEventOccur",value:function(e){if(!this.fired&&e>this.eventTime)return this.fired=!0,this.eventName}}]),e}();t.default=r},1526:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6028)),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastTime=this.now,this.UPDATE_THRESHOLD=250,this.timeEvents=this.generateTimeEvents(t)}return r(e,[{key:"generateTimeEvents",value:function(e){return[]}},{key:"collectEvents",value:function(e){return this.timeEvents.reduce((function(t,n){var r=n.didEventOccur(e);return r&&t.push(r),t}),[])}},{key:"onTimeUpdate",value:function(e){var t=[],n=e.target.currentTime;return this.now>this.lastTime+this.UPDATE_THRESHOLD&&(t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.collectEvents(n)),[i.AD_REMAINING_TIME_CHANGE])),this.lastTime=this.now,t}},{key:"now",get:function(){return(new Date).getTime()}}]),e}();t.default=o},2600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3269),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6028)),a=l(n(8603)),s=l(n(3470));function l(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.Listenable)(r=function(e){function t(e,n,r){var i=n.videoURL;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e||!i)throw"Fatal Error - videoElement or videoURL not provided";return o.initializeState(e,i),o.registerEvents(e),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"play",value:function(){this.videoEl&&this.videoEl.play()}},{key:"pause",value:function(){this.videoEl&&this.videoEl.pause()}},{key:"initializeState",value:function(e,t){}},{key:"registerEvents",value:function(e){this.registerListener(e,"loadedmetadata",this.onLoadedMetaData,this),this.registerListener(e,"ended",this.onEnded,this)}},{key:"onLoadedMetaData",value:function(e){this.timeUpdateHandler=new s.default(e.target.duration),this.registerListener(e.target,"timeupdate",this.onTimeUpdate,this),this.unregisterListener(e.target,"loadedmetadata"),this.publish(u.AD_DURATION_CHANGE)}},{key:"onTimeUpdate",value:function(e){var t=this.timeUpdateHandler.onTimeUpdate(e);this.publishAll(t)}},{key:"onEnded",value:function(){this.publish(u.AD_VIDEO_COMPLETE),this.publish(u.AD_STOPPED),this.destory()}},{key:"destory",value:function(){this.videoEl&&(this.videoEl.pause(),this.unregisterAll())}},{key:"duration",get:function(){return this.videoEl.duration>0?this.videoEl.duration:-2}},{key:"remaining",get:function(){return this.videoEl.duration?this.videoEl.duration-this.videoEl.currentTime:-2}},{key:"volume",get:function(){this.videoEl&&this.videoEl.volume},set:function(e){this.videoEl&&!isNaN(e)&&(this.videoEl.volume=e)}}]),t}(a.default))||r;t.default=c},6028:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AD_LOADED="AdLoaded",t.AD_STARTED="AdStarted",t.AD_STOPPED="AdStopped",t.AD_SKIPPED="AdSkipped",t.AD_SKIPPABLE_STATE_CHANGE="AdSkippableStateChange",t.AD_SIZE_CHANGE="AdSizeChange",t.AD_LINEAR_CHANGE="AdLinearChange",t.AD_DURATION_CHANGE="AdDurationChange",t.AD_EXPANDED_CHANGE="AdExpandedChange",t.AD_REMAINING_TIME_CHANGE="AdRemainingTimeChange",t.AD_VOLUME_CHANGE="AdVolumeChange",t.AD_IMPRESSION="AdImpression",t.AD_VIDEO_START="AdVideoStart",t.AD_VIDEO_FIRST_QUARTILE="AdVideoFirstQuartile",t.AD_VIDEO_MIDPOINT="AdVideoMidpoint",t.AD_VIDEO_THIRD_QUARTILE="AdVideoThirdQuartile",t.AD_VIDEO_COMPLETE="AdVideoComplete",t.AD_CLICK_THRU="AdClickThru",t.AD_INTERACTION="AdInteraction",t.AD_USER_ACCEPT_INVITATION="AdUserAcceptInvitation",t.AD_USER_MINIMIZE="AdUserMinimize",t.AD_USER_CLOSE="AdUserClose",t.AD_PAUSED="AdPaused",t.AD_PLAYING="AdPlaying",t.AD_LOG="AdLog",t.AD_ERROR="AdError"},3269:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Listenable=t.Observable=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(r=n(2241))&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.Observable=function(e){return function(e){function t(){return u(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"subscribe",value:function(e,t,n){return this.pubsub=this.pubsub||new o.default,this.pubsub.subscribe(t,e.bind(n)),this}},{key:"unsubscribe",value:function(e,t){return this.pubsub=this.pubsub||new o.default,this.pubsub.unsubscribe(t,e),this}},{key:"publish",value:function(e,t){return this.pubsub=this.pubsub||new o.default,this.pubsub.publish(e,t),this}},{key:"publishAll",value:function(e){e&&(this.pubsub=this.pubsub||new o.default,(e=Array.isArray(e)?e:[e]).forEach(this.publish.bind(this)))}}]),t}(e)},t.Listenable=function(e){return function(e){function t(){return u(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"registerListener",value:function(e,t,n,r){this.listeners=this.listeners||[],n=n.bind(r),this.listeners.push({el:e,eventName:t,fn:n}),e.addEventListener(t,n)}},{key:"unregisterListener",value:function(e,t){this.listeners=this.listeners||[],this.listeners.filter((function(e){return e.eventName===t})).forEach((function(t){return e.removeEventListener(t.eventName,t.fn)})),this.listeners=this.listeners.filter((function(e){return e.eventName!==t}))}},{key:"unregisterAll",value:function(){this.listeners=this.listeners||[],this.listeners.forEach((function(e){return e.el.removeEventListener(e.eventName,e.fn)})),this.listeners=[]}}]),t}(e)}},2217:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidParser=t.ValidOverlay=t.ValidCreative=t.ValidateClass=void 0;var r=u(n(8603)),i=u(n(6973)),o=u(n(373));function u(e){return e&&e.__esModule?e:{default:e}}var a=t.ValidateClass=function(e,t){return e.prototype instanceof t};t.ValidCreative=function(e){if(void 0===e)return!1;if(a(e,r.default))return!0;throw"Invalid creative provided. Should inherit from BaseCreative or VideoCreative"},t.ValidOverlay=function(e){if(void 0===e)return!1;if(a(e,i.default))return!0;throw"Invalid overlay provided. Should inherit from BaseOverlay or SimpleControls"},t.ValidParser=function(e){if(void 0===e)return!1;if(a(e,o.default))return!0;throw"Invalid parser provided. Should inherit from BaseParser or JSONParser"}},6973:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(0,n(3269).Observable)(r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"setSize",value:function(){}},{key:"generateControls",value:function(){return document.createDocumentFragment()}},{key:"destroy",value:function(){}},{key:"publish",value:function(){}},{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}}]),e}())||r;t.default=o},3843:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3269),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6028)),s=(i=n(6973))&&i.__esModule?i:{default:i},l=(0,u.Listenable)(r=function(e){function t(e,n,r){var i=n.clickThrough;r.size,function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(void 0===e)throw"Fatal Error - slot element not provided";o.slotEl=e;var u=o.generateControls();e.appendChild(u);var a=document.querySelector(".tektok_vid_slot");return i&&(o.clickThrough=i,o.registerListener(a,"click",o.onClick,o)),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"onClick",value:function(e){e.preventDefault(),this.publish(a.AD_CLICK_THRU),window.open(this.clickThrough,"_blank")}},{key:"setSize",value:function(e,t){this.slotEl.style="cursor: pointer; width: "+e+"px; height: "+t+"px;"}},{key:"generateControls",value:function(){return document.createDocumentFragment()}},{key:"destroy",value:function(){this.unregisterAll()}}]),t}(s.default))||r;t.default=l},373:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"parseAdParameters",value:function(){return{}}}]),e}();t.default=r},9819:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"parseAdParameters",value:function(e){return JSON.parse(e)}}]),t}(((r=n(373))&&r.__esModule?r:{default:r}).default);t.default=a},4659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VPAIDProperties=t.VPAIDMethods=void 0;var r=o(n(1165)),i=o(n(9064));function o(e){return e&&e.__esModule?e:{default:e}}t.VPAIDMethods=r.default,t.VPAIDProperties=i.default},1165:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6028));function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){return function(e){function t(){return u(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"initAd",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return this.updateStateFromInitAd({width:e,height:t,viewMode:n,creativeData:i,environmentVars:o}),this.parseAdParameters(i.AdParameters),this}},{key:"parseAdParameters",value:function(e){try{Promise.all([this.Parser.parseAdParameters(e)]).then(this.onAdParametersParsed.bind(this),this.onAdParseFail.bind(this))}catch(e){this.onAdParseFail(e)}return this}},{key:"startAd",value:function(){return this.skippable=!0,this.publish(o.AD_IMPRESSION),this.publish(o.AD_STARTED),this.publish(o.AD_VIDEO_START),this.publish(o.AD_SKIPPABLE_STATE_CHANGE),this}},{key:"skipAd",value:function(){return this.publish(o.AD_SKIPPED),this}},{key:"stopAd",value:function(){return this.destroy&&this.destroy(),this.publish(o.AD_STOPPED),this}},{key:"pauseAd",value:function(){return this.ad&&this.ad.pause(),this.publish(o.AD_PAUSED),this}},{key:"resumeAd",value:function(){return this.ad&&this.ad.play(),this.publish(o.AD_PLAYING),this}},{key:"collapseAd",value:function(){return this.expanded=!1,this.publish(o.AD_EXPANDED_CHANGE),this}},{key:"expandAd",value:function(){return this.expanded=!0,this.publish(o.AD_EXPANDED_CHANGE),this}},{key:"resizeAd",value:function(e,t,n){return this.setSize(e,t),this.viewMode=n,this.publish(o.AD_SIZE_CHANGE),this}},{key:"setSize",value:function(e,t){this.size&&(this.size.width=e,this.size.height=t),this.adOverlay&&this.adOverlay.setSize(e,t)}},{key:"updateStateFromInitAd",value:function(e){var t=e.width,n=e.height,i=e.viewMode,o=e.creativeData,u=e.environmentVars;this.setSize(t,n),this.viewMode=i,this.creativeData=r({},o),this.environmentVars=r({},u)}}]),t}(e)}},9064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){return function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"getAdExpanded",value:function(){return this.expanded}},{key:"getAdLinear",value:function(){return!0}},{key:"getAdDuration",value:function(){return this.ad?this.ad.duration:-2}},{key:"getAdRemainingTime",value:function(){return this.ad?this.ad.remaining:-2}},{key:"getAdSkippableState",value:function(){return this.skippable}},{key:"getAdVolume",value:function(){return this.ad&&!isNaN(this.ad.volume)?this.ad.volume:-1}},{key:"getAdCompanions",value:function(){return""}},{key:"getAdIcons",value:function(){return!1}},{key:"getAdHeight",value:function(){return this.size?this.size.height:-1}},{key:"getAdWidth",value:function(){return this.size?this.size.width:-1}},{key:"handshakeVersion",value:function(){return"2.0"}},{key:"setAdVolume",value:function(e){this.ad&&(this.ad.volume=e)}}]),t}(e)}},8593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3269),u=n(2217),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6028)),s=n(4659),l=p(n(3843)),c=p(n(9819)),f=p(n(2600));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=(0,o.Observable)(r=(0,s.VPAIDMethods)(r=(0,s.VPAIDProperties)(r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e),this.initializeState(t),this.attachVPAID(t)}return i(e,[{key:"attachVPAID",value:function(e){e.window&&!e.window.getVPAIDAd&&(e.window.getVPAIDAd=this.getVPAIDAd.bind(this))}},{key:"initializeState",value:function(e){this.expanded=!1,this.skippable=!1,this.size={width:640,height:360},this.selectComponents(e)}},{key:"selectComponents",value:function(e){this.AdCreative=(0,u.ValidCreative)(e.creativeFormat)?e.creativeFormat:f.default,this.Overlay=(0,u.ValidOverlay)(e.overlays)?e.overlays:l.default,this.Parser=(0,u.ValidParser)(e.parser)?e.parser:c.default}},{key:"getVPAIDAd",value:function(){return this}},{key:"onAdParseFail",value:function(e){console.log(e),this.destroy(),this.publish(a.AD_ERROR,"Error parsing AdParameters - "+e.toString()),this.publish(a.AD_STOPPED)}},{key:"onAdParametersParsed",value:function(e){var t=this,n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e,1)[0];this.ad=new this.AdCreative(this.environmentVars.videoSlot,n,this),this.adOverlay=new this.Overlay(this.environmentVars.slot,n,this),Object.values(a).forEach((function(e){t.ad&&t.ad.subscribe&&t.ad.subscribe(t.onCreativeEvent.bind(t,e),e),t.adOverlay&&t.adOverlay.subscribe&&t.adOverlay.subscribe(t.onOverlayEvent.bind(t,e),e)})),this.publish(a.AD_LOADED)}},{key:"onCreativeEvent",value:function(e){this.publish(e)}},{key:"onOverlayEvent",value:function(e){this.publish(e)}},{key:"destroy",value:function(){this.ad&&"function"==typeof this.ad.destroy&&this.ad.destroy(),this.adOverlay&&"function"==typeof this.adOverlay.destroy&&this.adOverlay.destroy()}}]),e}())||r)||r)||r;t.default=h},4126:(e,t,n)=>{"use strict";var r=h(n(8593)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6028)),o=h(n(8603)),u=h(n(2600)),a=h(n(2333)),s=h(n(1526)),l=h(n(3470)),c=h(n(6973)),f=h(n(3843)),p=h(n(373)),d=h(n(9819));function h(e){return e&&e.__esModule?e:{default:e}}r.default.VPAIDInterface=r.default,r.default.VPAIDEvents=i,r.default.BaseCreative=o.default,r.default.VideoCreative=u.default,r.default.TimeEvent=a.default,r.default.TimeUpdateHandler=s.default,r.default.QuartileTimeUpdateHandler=l.default,r.default.BaseOverlay=c.default,r.default.ClickThroughOverlay=f.default,r.default.BaseParser=p.default,r.default.JSONParser=d.default,e.exports=r.default}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}return(()=>{"use strict";var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=o(n(4126)),r=o(n(3843)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6028));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(t){function n(){return u(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),e(n,[{key:"generateControls",value:function(){var e=document.createElement("div");return e.innerHTML=' <style>      @import url("https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800,900&displa=swap");      * {        margin: 0;        padding: 0;        box-sizing: border-box;        font-family: "Poppins", sans-serif;      }      section {        position: relative;        max-width: 640px;        height: 360px;        display: flex;        justify-content: space-between;        align-items: center;        background: #0062be;        transition: 0.5s;      }      .content {        position: relative;        width: 100%;        height: 100%;        display: flex;        justify-content: space-between;        align-items: center;      }      .content .videoBox {        max-width: 350px;        position: absolute;        top: 15%;        left: 5%;      }      .content .videoBox video {        width: 100%;        height: 100%;        outline: none;      }      .content .imgBox {        position: absolute;        top: 15%;        right: 15%;      }      .content .imgBox img {        max-width: 100px;      }      .thumb {        position: absolute;        left: 50%;        bottom: 5px;        transform: translateX(-50%);        display: flex;      }      .thumb li {        list-style: none;        display: inline-block;        margin: 0 20px;        cursor: pointer;        transition: 0.5s;      }      .thumb li:hover {        transform: translateY(-15px);      }      .thumb li img {        max-width: 40px;      }      .sci {        position: absolute;        top: 40%;        right: 30px;        transform: translateY(-50%);        display: flex;        justify-content: center;        align-items: center;        flex-direction: column;      }      .sci li {        list-style: none;      }      .sci li a {        display: inline-block;        filter: invert(1);        margin: 5px 0;        transform: scale(0.6);      }    </style><section class="sec">      <div class="content">        <div class="videoBox">          <video class=\'tektok_vid_slot\' crossorigin=\'anonymous\' autoplay muted controls>            <source              src="https://github.com/ronald132/spotx/raw/master/videos/Pepsi%20Black.mp4"            />          </video>        </div>        <div class="imgBox">          <img            src="https://raw.githubusercontent.com/ronald132/spotx/master/images/pepsi001.png"            alt=""            class="pepsi"          />        </div>      </div>      <ul class="thumb">        <li>          <img id=\'imgThumb1\'            src="https://raw.githubusercontent.com/ronald132/spotx/master/images/pepsi001.png"            alt=""          />        </li>        <li>          <img id=\'imgThumb2\'            src="https://raw.githubusercontent.com/ronald132/spotx/master/images/pepsi002.png"            alt=""          />        </li>        <li>          <img id=\'imgThumb3\'            src="https://raw.githubusercontent.com/ronald132/spotx/master/images/pepsi003.png"            alt=""          />        </li>      </ul>      <ul class="sci">        <li>          <a href="#"            ><img              src="https://raw.githubusercontent.com/ronald132/spotx/master/images/facebook.png"              alt=""          /></a>        </li>        <li>          <a href="#"            ><img              src="https://raw.githubusercontent.com/ronald132/spotx/master/images/twitter.png"              alt=""          /></a>        </li>        <li>          <a href="#"            ><img              src="https://raw.githubusercontent.com/ronald132/spotx/master/images/instagram.png"              alt=""          /></a>        </li>      </ul>    </section>',e}}]),n}(r.default),l=new t.default({overlays:s,window});function c(e){document.querySelector(".pepsi").src=e}function f(e){document.querySelector(".sec").style.background=e}l.subscribe((function(e){console.log("ad is loaded");var t=document.querySelector(".tektok_vid_slot");l.ad.videoEl=t,l.ad.videoEl.play(),document.querySelector("#imgThumb1").onclick=function(e){e.preventDefault(),c("https://raw.githubusercontent.com/ronald132/spotx/master/images/pepsi001.png"),f("#0062be")},document.querySelector("#imgThumb2").onclick=function(e){e.preventDefault(),c("https://raw.githubusercontent.com/ronald132/spotx/master/images/pepsi002.png"),f("#e60c2c")},document.querySelector("#imgThumb3").onclick=function(e){e.preventDefault(),c("https://raw.githubusercontent.com/ronald132/spotx/master/images/pepsi003.png"),f("#1e1e1e")}}),i.AD_LOADED),l.subscribe((function(e){console.log("ad is started")}),i.AD_STARTED),l.subscribe((function(e){console.log("ad is at firstquartile")}),i.AD_VIDEO_FIRST_QUARTILE),l.subscribe((function(e){console.log("ad is at midpoint")}),i.AD_VIDEO_MIDPOINT),l.subscribe((function(e){console.log("ad is at thirdquartile")}),i.AD_VIDEO_THIRD_QUARTILE),l.subscribe((function(e){console.log("ad is complete")}),i.AD_VIDEO_COMPLETE)})(),{}})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92cGFpZC1nZW5lcmljL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly92cGFpZC1nZW5lcmljLy4vbm9kZV9tb2R1bGVzL1B1YlN1Yi9zcmMvcHVic3ViLmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvQ3JlYXRpdmVzL0Jhc2VDcmVhdGl2ZS5qcyIsIndlYnBhY2s6Ly92cGFpZC1nZW5lcmljLy4vc3JjL2pzL0NyZWF0aXZlcy9UaW1lcnMvUXVhcnRpbGVUaW1lVXBkYXRlSGFuZGxlci5qcyIsIndlYnBhY2s6Ly92cGFpZC1nZW5lcmljLy4vc3JjL2pzL0NyZWF0aXZlcy9UaW1lcnMvVGltZUV2ZW50LmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvQ3JlYXRpdmVzL1RpbWVycy9UaW1lVXBkYXRlSGFuZGxlci5qcyIsIndlYnBhY2s6Ly92cGFpZC1nZW5lcmljLy4vc3JjL2pzL0NyZWF0aXZlcy9WaWRlb0NyZWF0aXZlLmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvRW51bS9WUEFJREV2ZW50cy5qcyIsIndlYnBhY2s6Ly92cGFpZC1nZW5lcmljLy4vc3JjL2pzL0hlbHBlcnMvQmVoYXZpb3JzLmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvSGVscGVycy9WYWxpZGF0aW9uLmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvT3ZlcmxheXMvQmFzZU92ZXJsYXkuanMiLCJ3ZWJwYWNrOi8vdnBhaWQtZ2VuZXJpYy8uL3NyYy9qcy9PdmVybGF5cy9DbGlja1Rocm91Z2hPdmVybGF5LmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvUGFyc2Vycy9CYXNlUGFyc2VyLmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvUGFyc2Vycy9KU09OUGFyc2VyLmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvVlBBSUQvVlBBSUREZWNvcmF0b3JzLmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvVlBBSUQvVlBBSURNZXRob2RzLmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvVlBBSUQvVlBBSURQcm9wZXJ0aWVzLmpzIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9zcmMvanMvVlBBSURJbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdnBhaWQtZ2VuZXJpYy8uL3NyYy9qcy9pbmRleC5qcyIsIndlYnBhY2s6Ly92cGFpZC1nZW5lcmljL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3ZwYWlkLWdlbmVyaWMvLi9kZW1vL2RlbW8uanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwiYSIsImkiLCJzZWxmIiwibmFtZSIsImNvbnRleHQiLCJPTERfUFVCTElDX0FQSSIsImZvck93biIsIm9iaiIsImNhbGxiYWNrIiwidGhpc0FyZyIsImtleSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlbGl2ZXJUb3BpYyIsImluc3RhbmNlIiwidG9waWMiLCJkYXRhIiwiY3VycmVudFN1YnNjcmliZXIiLCJ0b2tlbiIsInRvcGljcyIsIl9wdWJzdWJfdG9waWNzIiwic3Vic2NyaWJlcnMiLCJzbGljZSIsImxlbiIsImxlbmd0aCIsIl9vcHRpb25zIiwiaW1tZWRpYXRlRXhjZXB0aW9ucyIsImV4Y2VwdGlvbiIsInNldFRpbWVvdXQiLCJvbmNlIiwidW5zdWJzY3JpYmUiLCJwdWJsaXNoRGF0YSIsImFyZ3MiLCJkYXRhQXJncyIsIkFycmF5IiwicHVibGlzaCIsInN5bmMiLCJQdWJTdWIiLCJvcHRpb25zIiwidGFyZ2V0IiwidG8iLCJpbmRleCIsIm5leHRTb3VyY2UiLCJuZXh0S2V5IiwiVHlwZUVycm9yIiwiYXJndW1lbnRzIiwiYXNzaWduIiwidGhpcyIsIl9wdWJzdWJfdWlkIiwic3Vic2NyaWJlIiwicHVzaCIsInN1YnNjcmliZU9uY2UiLCJwdWJsaXNoU3luYyIsInByb3AiLCJ0ZiIsInNwbGljZSIsInVuc3Vic2NyaWJlQWxsIiwiaGFzU3Vic2NyaWJlcnMiLCJ2YWx1ZSIsInJlcyIsInRvcGljVmFsdWUiLCJ0b3BpY0tleSIsInN1YnNjcmliZXJzQnlUb3BpYyIsImFsaWFzIiwiYWxpYXNNYXAiLCJmbiIsImFwcGx5Iiwibm9Db25mbGljdCIsIkJhc2VDcmVhdGl2ZSIsIk9ic2VydmFibGUiLCJ2IiwiVlBBSURFdmVudHMiLCJRdWFydGlsZVRpbWVVcGRhdGVIYW5kbGVyIiwiZHVyYXRpb24iLCJxdWFydGlsZSIsIlRpbWVFdmVudCIsIkFEX1ZJREVPX0ZJUlNUX1FVQVJUSUxFIiwiQURfVklERU9fTUlEUE9JTlQiLCJBRF9WSURFT19USElSRF9RVUFSVElMRSIsIlRpbWVVcGRhdGVIYW5kbGVyIiwiZXZlbnROYW1lIiwiZXZlbnRUaW1lIiwiZmlyZWQiLCJjdXJyZW50VGltZSIsImxhc3RUaW1lIiwibm93IiwiVVBEQVRFX1RIUkVTSE9MRCIsInRpbWVFdmVudHMiLCJnZW5lcmF0ZVRpbWVFdmVudHMiLCJyZWR1Y2UiLCJjb2xsZWN0ZWQiLCJ0aW1lRXZlbnQiLCJvY2N1cnJlZCIsImRpZEV2ZW50T2NjdXIiLCJldmVudCIsInB1YmxpY2F0aW9ucyIsImNvbGxlY3RFdmVudHMiLCJBRF9SRU1BSU5JTkdfVElNRV9DSEFOR0UiLCJEYXRlIiwiZ2V0VGltZSIsIlZpZGVvQ3JlYXRpdmUiLCJMaXN0ZW5hYmxlIiwidmlkZW9FbGVtZW50IiwicGFyZW50SW50ZXJmYWNlIiwidmlkZW9VUkwiLCJpbml0aWFsaXplU3RhdGUiLCJyZWdpc3RlckV2ZW50cyIsInZpZGVvRWwiLCJwbGF5IiwicGF1c2UiLCJyZWdpc3Rlckxpc3RlbmVyIiwib25Mb2FkZWRNZXRhRGF0YSIsIm9uRW5kZWQiLCJ0aW1lVXBkYXRlSGFuZGxlciIsIm9uVGltZVVwZGF0ZSIsInVucmVnaXN0ZXJMaXN0ZW5lciIsIkFEX0RVUkFUSU9OX0NIQU5HRSIsInVwZGF0ZXMiLCJwdWJsaXNoQWxsIiwiQURfVklERU9fQ09NUExFVEUiLCJBRF9TVE9QUEVEIiwiZGVzdG9yeSIsInVucmVnaXN0ZXJBbGwiLCJ2b2x1bWUiLCJpc05hTiIsIkFEX0xPQURFRCIsIkFEX1NUQVJURUQiLCJBRF9TS0lQUEVEIiwiQURfU0tJUFBBQkxFX1NUQVRFX0NIQU5HRSIsIkFEX1NJWkVfQ0hBTkdFIiwiQURfTElORUFSX0NIQU5HRSIsIkFEX0VYUEFOREVEX0NIQU5HRSIsIkFEX1ZPTFVNRV9DSEFOR0UiLCJBRF9JTVBSRVNTSU9OIiwiQURfVklERU9fU1RBUlQiLCJBRF9DTElDS19USFJVIiwiQURfSU5URVJBQ1RJT04iLCJBRF9VU0VSX0FDQ0VQVF9JTlZJVEFUSU9OIiwiQURfVVNFUl9NSU5JTUlaRSIsIkFEX1VTRVJfQ0xPU0UiLCJBRF9QQVVTRUQiLCJBRF9QTEFZSU5HIiwiQURfTE9HIiwiQURfRVJST1IiLCJzdWJqZWN0IiwibGlzdGVuZXJTY29wZSIsInB1YnN1YiIsImJpbmQiLCJldmVudHMiLCJpc0FycmF5IiwiZm9yRWFjaCIsImVsIiwic2NvcGUiLCJsaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZmlsdGVyIiwibCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJWYWxpZGF0ZUNsYXNzIiwicGFyZW50IiwiVmFsaWRDcmVhdGl2ZSIsIlZhbGlkT3ZlcmxheSIsIkJhc2VPdmVybGF5IiwiVmFsaWRQYXJzZXIiLCJCYXNlUGFyc2VyIiwiZG9jdW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiQ2xpY2tUaHJvdWdoT3ZlcmxheSIsInNsb3RFbCIsImNsaWNrVGhyb3VnaCIsInNpemUiLCJjb250cm9scyIsImdlbmVyYXRlQ29udHJvbHMiLCJhcHBlbmRDaGlsZCIsInRla3Rva192aWRfc2xvdCIsInF1ZXJ5U2VsZWN0b3IiLCJvbkNsaWNrIiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3ciLCJvcGVuIiwid2lkdGgiLCJoZWlnaHQiLCJzdHlsZSIsIkpTT05QYXJzZXIiLCJwYXJhbWV0ZXJzU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwiVlBBSURNZXRob2RzIiwiVlBBSURQcm9wZXJ0aWVzIiwidmlld01vZGUiLCJkZXNpcmVkQml0cmF0ZSIsImNyZWF0aXZlRGF0YSIsImVudmlyb25tZW50VmFycyIsInVwZGF0ZVN0YXRlRnJvbUluaXRBZCIsInBhcnNlQWRQYXJhbWV0ZXJzIiwiQWRQYXJhbWV0ZXJzIiwiYWRQYXJhbWV0ZXJzIiwiUHJvbWlzZSIsImFsbCIsIlBhcnNlciIsInRoZW4iLCJvbkFkUGFyYW1ldGVyc1BhcnNlZCIsIm9uQWRQYXJzZUZhaWwiLCJlIiwic2tpcHBhYmxlIiwiZGVzdHJveSIsImFkIiwiZXhwYW5kZWQiLCJzZXRTaXplIiwiYWRPdmVybGF5IiwicmVtYWluaW5nIiwidm9sIiwiVlBBSURJbnRlcmZhY2UiLCJwYXJhbXMiLCJhdHRhY2hWUEFJRCIsImdldFZQQUlEQWQiLCJzZWxlY3RDb21wb25lbnRzIiwiQWRDcmVhdGl2ZSIsImNyZWF0aXZlRm9ybWF0IiwiT3ZlcmxheSIsIm92ZXJsYXlzIiwicGFyc2VyIiwiY29uc29sZSIsImxvZyIsInRvU3RyaW5nIiwidmlkZW9TbG90Iiwic2xvdCIsInZhbHVlcyIsIkVWRU5UX05BTUUiLCJvbkNyZWF0aXZlRXZlbnQiLCJvbk92ZXJsYXlFdmVudCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJDdXN0b21Db250cm9scyIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJpbWdTbGlkZXIiLCJhbnl0aGluZyIsInNyYyIsImNoYW5nZUJnQ29sb3IiLCJjb2xvciIsImJhY2tncm91bmQiLCJldnQi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QyxHQUM1QkEsRUFBRTFCLGlCQUNGZ0UsRUFDRSxnRkFFRkcsRUFBYyxjQUVmN0ssRUFBWXNELFdBRWYvRyxFQUFTbUMsV0FBVSxTQUFDc00sR0FDbEJ6QixRQUFRQyxJQUFJLG1CQUNYeEosRUFBWXVELFlBRWZoSCxFQUFTbUMsV0FBVSxTQUFDc00sR0FDbEJ6QixRQUFRQyxJQUFJLDRCQUNYeEosRUFBWUsseUJBRWY5RCxFQUFTbUMsV0FBVSxTQUFDc00sR0FDbEJ6QixRQUFRQyxJQUFJLHVCQUNYeEosRUFBWU0sbUJBRWYvRCxFQUFTbUMsV0FBVSxTQUFDc00sR0FDbEJ6QixRQUFRQyxJQUFJLDRCQUNYeEosRUFBWU8seUJBRWZoRSxFQUFTbUMsV0FBVSxTQUFDc00sR0FDbEJ6QixRQUFRQyxJQUFJLG9CQUNYeEosRUFBWWdELG9CIiwiZmlsZSI6ImRlbW8uYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IGZhY3RvcnkoKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHNlbGYsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIihmdW5jdGlvbiAobmFtZSwgY29udGV4dCwgZGVmaW5pdGlvbikge1xuICAndXNlIHN0cmljdCc7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZGVmaW5pdGlvbik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGRlZmluaXRpb24oKTtcbiAgfSBlbHNlIHtcbiAgICBjb250ZXh0W25hbWVdID0gZGVmaW5pdGlvbihuYW1lLCBjb250ZXh0KTtcbiAgfVxufSgnUHViU3ViJywgdGhpcywgZnVuY3Rpb24gKG5hbWUsIGNvbnRleHQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBPTERfUFVCTElDX0FQSSA9IChjb250ZXh0IHx8IHt9KVtuYW1lXTtcblxuICBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0KSB7XG4gICAgdmFyIHRvLCBpbmRleCwgbmV4dFNvdXJjZSwgbmV4dEtleTtcblxuICAgIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgdG8gPSBPYmplY3QodGFyZ2V0KTtcblxuICAgIGZvciAoaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIG5leHRTb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuXG4gICAgICBpZiAobmV4dFNvdXJjZSAhPSBudWxsKSB7XG4gICAgICAgIGZvciAobmV4dEtleSBpbiBuZXh0U291cmNlKSB7XG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG87XG4gIH1cblxuICBmdW5jdGlvbiBmb3JPd24ob2JqLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIHZhciBrZXk7XG5cbiAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIG9ialtrZXldLCBrZXksIG9iaikgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFsaWFzKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNsb3N1cmUoKSB7XG4gICAgICByZXR1cm4gdGhpc1tmbl0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gZGVsaXZlclRvcGljKGluc3RhbmNlLCB0b3BpYywgZGF0YSkge1xuICAgIHZhciB0b3BpY3MgPSBpbnN0YW5jZS5fcHVic3ViX3RvcGljcztcbiAgICB2YXIgc3Vic2NyaWJlcnMgPSB0b3BpY3NbdG9waWNdID8gdG9waWNzW3RvcGljXS5zbGljZSgwKSA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuICAgIHZhciBjdXJyZW50U3Vic2NyaWJlciwgdG9rZW47XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICB0b2tlbiA9IHN1YnNjcmliZXJzW2ldLnRva2VuO1xuICAgICAgY3VycmVudFN1YnNjcmliZXIgPSBzdWJzY3JpYmVyc1tpXTtcblxuICAgICAgaWYgKCFpbnN0YW5jZS5fb3B0aW9ucy5pbW1lZGlhdGVFeGNlcHRpb25zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY3VycmVudFN1YnNjcmliZXIuY2FsbGJhY2soZGF0YSwgeyBuYW1lOiB0b3BpYywgdG9rZW46IHRva2VuIH0pO1xuICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFN1YnNjcmliZXIuY2FsbGJhY2soZGF0YSwgeyBuYW1lOiB0b3BpYywgdG9rZW46IHRva2VuIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBVbnN1YnNjcmliZSBmcm9tIGV2ZW50IGJhc2VkIG9uIHRva2VuaXplZCByZWZlcmVuY2UsXG4gICAgICAvLyBpZiBzdWJzY3JpYmVyJ3MgcHJvcGVydHkgb25jZSBpcyBzZXQgdG8gdHJ1ZS5cbiAgICAgIGlmIChjdXJyZW50U3Vic2NyaWJlci5vbmNlID09PSB0cnVlKSB7XG4gICAgICAgIGluc3RhbmNlLnVuc3Vic2NyaWJlKHRva2VuKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwdWJsaXNoRGF0YShhcmdzKSB7XG4gICAgdmFyIGRhdGFBcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncywgMSk7XG4gICAgcmV0dXJuIGRhdGFBcmdzLmxlbmd0aCA8PSAxID8gZGF0YUFyZ3NbMF0gOiBkYXRhQXJncztcbiAgfVxuXG4gIGZ1bmN0aW9uIHB1Ymxpc2goaW5zdGFuY2UsIHRvcGljLCBkYXRhLCBzeW5jKSB7XG4gICAgdmFyIHRvcGljcyA9IGluc3RhbmNlLl9wdWJzdWJfdG9waWNzO1xuXG4gICAgaWYgKCF0b3BpY3NbdG9waWNdKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc3luYyA/IGRlbGl2ZXJUb3BpYyhpbnN0YW5jZSwgdG9waWMsIGRhdGEpIDogc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBkZWxpdmVyVG9waWMoaW5zdGFuY2UsIHRvcGljLCBkYXRhKTtcbiAgICB9LCAwKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBQdWJTdWIgaW5zdGFuY2UuXG4gICAqIEBjb25zdHJ1Y3RvciBQdWJTdWJcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSBVc2VyIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5pbW1lZGlhdGVFeGNlcHRpb25zPWZhbHNlXSBGb3JjZXMgZXhjZXB0aW9ucyB0byBiZSB0aHJvd24gaW1tZWRpYXRlbHkgaW5zdGVhZCBvZiBkZWxheWVkIGV4Y2VwdGlvbnNcbiAgICovXG4gIGZ1bmN0aW9uIFB1YlN1YihvcHRpb25zKSB7XG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgaW1tZWRpYXRlRXhjZXB0aW9uczogZmFsc2VcbiAgICB9O1xuXG4gICAgb3B0aW9ucyA9IGFzc2lnbih7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFB1YlN1YikpIHtcbiAgICAgIHJldHVybiBuZXcgUHViU3ViKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHRoaXMuX3B1YnN1Yl90b3BpY3MgPSB7fTsgLy8gU3RvcmFnZSBmb3IgdG9waWNzIHRoYXQgY2FuIGJlIGJyb2FkY2FzdCBvciBsaXN0ZW5lZCB0by5cbiAgICB0aGlzLl9wdWJzdWJfdWlkID0gLTE7IC8vIEEgdG9waWMgaWRlbnRpZmllci5cbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gZXZlbnRzIG9mIGludGVyZXN0IHdpdGggYSBzcGVjaWZpYyB0b3BpYyBuYW1lIGFuZCBhXG4gICAqIGNhbGxiYWNrIGZ1bmN0aW9uLCB0byBiZSBleGVjdXRlZCB3aGVuIHRoZSB0b3BpYy9ldmVudCBpcyBvYnNlcnZlZC5cbiAgICpcbiAgICogQG1lbWJlcm9mIFB1YlN1YlxuICAgKiBAdGhpcyB7UHViU3VifVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9waWMgVGhlIHRvcGljJ3MgbmFtZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayBmdW5jdGlvbiB0byBleGVjdXRlIG9uIGV2ZW50LCB0YWtpbmcgdHdvIGFyZ3VtZW50czpcbiAgICogICAgICAgIC0geyp9IGRhdGEgVGhlIGRhdGEgcGFzc2VkIHdoZW4gcHVibGlzaGluZyBhbiBldmVudFxuICAgKiAgICAgICAgLSB7b2JqZWN0fSBUaGUgdG9waWMncyBpbmZvIChuYW1lICYgdG9rZW4pXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29uY2U9ZmFsc2VdIENoZWNrcyBpZiBldmVudCB3aWxsIGJlIHRyaWdnZXJlZCBvbmx5IG9uZSB0aW1lXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHRvcGljJ3MgdG9rZW5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIHB1YnN1YiA9IG5ldyBQdWJTdWIoKTtcbiAgICpcbiAgICogdmFyIG9uVXNlckFkZCA9IHB1YnN1Yi5zdWJzY3JpYmUoJ3VzZXJfYWRkJywgZnVuY3Rpb24gKGRhdGEsIHRvcGljKSB7XG4gICAqICAgY29uc29sZS5sb2coJ1VzZXIgYWRkZWQnKTtcbiAgICogICBjb25zb2xlLmxvZygndXNlciBkYXRhOicsIGRhdGEpO1xuICAgKiB9KTtcbiAgICovXG4gIFB1YlN1Yi5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHRvcGljLCBjYWxsYmFjaywgb25jZSkge1xuICAgIHZhciB0b3BpY3MgPSB0aGlzLl9wdWJzdWJfdG9waWNzO1xuICAgIHZhciB0b2tlbiA9IHRoaXMuX3B1YnN1Yl91aWQgKz0gMTtcbiAgICB2YXIgb2JqID0ge307XG5cbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdXaGVuIHN1YnNjcmliaW5nIGZvciBhbiBldmVudCwgYSBjYWxsYmFjayBmdW5jdGlvbiBtdXN0IGJlIGRlZmluZWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0b3BpY3NbdG9waWNdKSB7XG4gICAgICB0b3BpY3NbdG9waWNdID0gW107XG4gICAgfVxuXG4gICAgb2JqLnRva2VuID0gdG9rZW47XG4gICAgb2JqLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgb2JqLm9uY2UgPSAhIW9uY2U7XG5cbiAgICB0b3BpY3NbdG9waWNdLnB1c2gob2JqKTtcblxuICAgIHJldHVybiB0b2tlbjtcbiAgfTtcblxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIGV2ZW50cyBvZiBpbnRlcmVzdCBzZXR0aW5nIGEgZmxhZ1xuICAgKiBpbmRpY2F0aW5nIHRoZSBldmVudCB3aWxsIGJlIHB1Ymxpc2hlZCBvbmx5IG9uZSB0aW1lLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgUHViU3ViXG4gICAqIEB0aGlzIHtQdWJTdWJ9XG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpYyBUaGUgdG9waWMncyBuYW1lXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgb24gZXZlbnQsIHRha2luZyB0d28gYXJndW1lbnRzOlxuICAgKiAgICAgICAgLSB7Kn0gZGF0YSBUaGUgZGF0YSBwYXNzZWQgd2hlbiBwdWJsaXNoaW5nIGFuIGV2ZW50XG4gICAqICAgICAgICAtIHtvYmplY3R9IFRoZSB0b3BpYydzIGluZm8gKG5hbWUgJiB0b2tlbilcbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgdG9waWMncyB0b2tlblxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiB2YXIgb25Vc2VyQWRkID0gcHVic3ViLnN1YnNjcmliZU9uY2UoJ3VzZXJfYWRkJywgZnVuY3Rpb24gKGRhdGEsIHRvcGljKSB7XG4gICAqICAgY29uc29sZS5sb2coJ1VzZXIgYWRkZWQnKTtcbiAgICogICBjb25zb2xlLmxvZygndXNlciBkYXRhOicsIGRhdGEpO1xuICAgKiB9KTtcbiAgICovXG4gIFB1YlN1Yi5wcm90b3R5cGUuc3Vic2NyaWJlT25jZSA9IGZ1bmN0aW9uICh0b3BpYywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmUodG9waWMsIGNhbGxiYWNrLCB0cnVlKTtcbiAgfTtcblxuICAvKipcbiAgICogUHVibGlzaGVzIGEgdG9waWMgYXN5bmNocm9ub3VzbHksIHBhc3NpbmcgdGhlIGRhdGEgdG8gaXRzIHN1YnNjcmliZXJzLlxuICAgKiBBc3luY2hyb25vdXMgcHVibGljYXRpb24gaGVscHMgaW4gdGhhdCB0aGUgb3JpZ2luYXRvciBvZiB0aGUgdG9waWNzIHdpbGxcbiAgICogbm90IGJlIGJsb2NrZWQgd2hpbGUgY29uc3VtZXJzIHByb2Nlc3MgdGhlbS5cbiAgICogRm9yIHN5bmNocm9ub3VzIHRvcGljIHB1YmxpY2F0aW9uIGNoZWNrIGBwdWJsaXNoU3luY2AuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBQdWJTdWJcbiAgICogQHRoaXMge1B1YlN1Yn1cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcGljIFRoZSB0b3BpYydzIG5hbWVcbiAgICogQHBhcmFtIHsuLi4qfSBbZGF0YV0gVGhlIGRhdGEgdG8gYmUgcGFzc2VkIHRvIGl0cyBzdWJzY3JpYmVyc1xuICAgKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0b3BpYyBleGlzdHMgYW5kIGV2ZW50IGlzIHB1Ymxpc2hlZDsgb3RoZXJpd3NlIGBmYWxzZWBcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogcHVic3ViLnB1Ymxpc2goJ3VzZXJfYWRkJywge1xuICAgKiAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgKiAgIGxhc3ROYW1lOiAnRG9lJyxcbiAgICogICBlbWFpbDogJ2pvaG5kb2VAZ21haWwuY29tJ1xuICAgKiB9KTtcbiAgICovXG4gIFB1YlN1Yi5wcm90b3R5cGUucHVibGlzaCA9IGZ1bmN0aW9uICh0b3BpYyAvKiAsIGRhdGEgKi8pIHtcbiAgICByZXR1cm4gcHVibGlzaCh0aGlzLCB0b3BpYywgcHVibGlzaERhdGEoYXJndW1lbnRzKSwgZmFsc2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQdWJsaXNoZXMgYSB0b3BpYyBzeW5jaHJvbm91c2x5LCBwYXNzaW5nIHRoZSBkYXRhIHRvIGl0cyBzdWJzY3JpYmVycy5cbiAgICpcbiAgICogQG1lbWJlcm9mIFB1YlN1YlxuICAgKiBAdGhpcyB7UHViU3VifVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9waWMgVGhlIHRvcGljJ3MgbmFtZVxuICAgKiBAcGFyYW0gey4uLip9IFtkYXRhXSBUaGUgZGF0YSB0byBiZSBwYXNzZWQgdG8gaXRzIHN1YnNjcmliZXJzXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRvcGljIGV4aXN0cyBhbmQgZXZlbnQgaXMgcHVibGlzaGVkOyBvdGhlcml3c2UgYGZhbHNlYFxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBwdWJzdWIucHVibGlzaFN5bmMoJ3VzZXJfYWRkJywge1xuICAgKiAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgKiAgIGxhc3ROYW1lOiAnRG9lJyxcbiAgICogICBlbWFpbDogJ2pvaG5kb2VAZ21haWwuY29tJ1xuICAgKiB9KTtcbiAgICovXG4gIFB1YlN1Yi5wcm90b3R5cGUucHVibGlzaFN5bmMgPSBmdW5jdGlvbiAodG9waWMgLyogLCBkYXRhICovKSB7XG4gICAgcmV0dXJuIHB1Ymxpc2godGhpcywgdG9waWMsIHB1Ymxpc2hEYXRhKGFyZ3VtZW50cyksIHRydWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZXMgZnJvbSBhIHNwZWNpZmljIHRvcGljLCBiYXNlZCBvbiB0aGUgdG9waWMgbmFtZSxcbiAgICogb3IgYmFzZWQgb24gYSB0b2tlbml6ZWQgcmVmZXJlbmNlIHRvIHRoZSBzdWJzY3JpcHRpb24uXG4gICAqXG4gICAqIEBtZW1iZXJvZiBQdWJTdWJcbiAgICogQHRoaXMge1B1YlN1Yn1cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSB0b3BpYyBUb3BpYydzIG5hbWUgb3Igc3Vic2NyaXB0aW9uIHJlZmVyZW5jZVxuICAgKiBAcmV0dXJuIHtib29sZWFufHN0cmluZ30gUmV0dXJucyBgZmFsc2VgIGlmIGB0b3BpY2AgZG9lcyBub3QgbWF0Y2ggYSBzdWJzY3JpYmVkIGV2ZW50OyBvdGhlcndpc2UgdGhlIHRvcGljJ3MgbmFtZVxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiAvLyBVbnN1YnNjcmliZSB1c2luZyB0aGUgdG9waWMncyBuYW1lLlxuICAgKiBwdWJzdWIudW5zdWJzY3JpYmUoJ3VzZXJfYWRkJyk7XG4gICAqXG4gICAqIC8vIFVuc3Vic2NyaWJlIHVzaW5nIGEgdG9rZW5pemVkIHJlZmVyZW5jZSB0byB0aGUgc3Vic2NyaXB0aW9uLlxuICAgKiBwdWJzdWIudW5zdWJzY3JpYmUob25Vc2VyQWRkKTtcbiAgICovXG4gIFB1YlN1Yi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAodG9waWMpIHtcbiAgICB2YXIgdG9waWNzID0gdGhpcy5fcHVic3ViX3RvcGljcztcbiAgICB2YXIgdGYgPSBmYWxzZTtcbiAgICB2YXIgcHJvcCwgbGVuO1xuXG4gICAgZm9yIChwcm9wIGluIHRvcGljcykge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0b3BpY3MsIHByb3ApKSB7XG4gICAgICAgIGlmICh0b3BpY3NbcHJvcF0pIHtcbiAgICAgICAgICBsZW4gPSB0b3BpY3NbcHJvcF0ubGVuZ3RoO1xuXG4gICAgICAgICAgd2hpbGUgKGxlbikge1xuICAgICAgICAgICAgbGVuIC09IDE7XG5cbiAgICAgICAgICAgIC8vIGB0b3BpY2AgaXMgYSB0b2tlbml6ZWQgcmVmZXJlbmNlIHRvIHRoZSBzdWJzY3JpcHRpb24uXG4gICAgICAgICAgICBpZiAodG9waWNzW3Byb3BdW2xlbl0udG9rZW4gPT09IHRvcGljKSB7XG4gICAgICAgICAgICAgIHRvcGljc1twcm9wXS5zcGxpY2UobGVuLCAxKTtcbiAgICAgICAgICAgICAgaWYgKHRvcGljc1twcm9wXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdG9waWNzW3Byb3BdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiB0b3BpYztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYHRvcGljYCBpcyB0aGUgZXZlbnQgbmFtZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSB0b3BpYykge1xuICAgICAgICAgICAgICB0b3BpY3NbcHJvcF0uc3BsaWNlKGxlbiwgMSk7XG4gICAgICAgICAgICAgIGlmICh0b3BpY3NbcHJvcF0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRvcGljc1twcm9wXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0ZiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRmID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9waWM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIHN1YnNjcmlwdGlvbnMgd2hhdHNvZXZlci5cbiAgICpcbiAgICogQG1lbWJlcm9mIFB1YlN1YlxuICAgKiBAdGhpcyB7UHViU3VifVxuICAgKiBAcmV0dXJuIHtQdWJTdWJ9IFRoZSBQdWJTdWIgaW5zdGFuY2UuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIHZhciBwdWJzdWIgPSBuZXcgUHViU3ViKCk7XG4gICAqIHB1YnN1Yi5zdWJzY3JpYmUoJ21lc3NhZ2UxJywgZnVuY3Rpb24gKCkge30pO1xuICAgKiBwdWJzdWIuc3Vic2NyaWJlKCdtZXNzYWdlMicsIGZ1bmN0aW9uICgpIHt9KTtcbiAgICogcHVic3ViLnN1YnNjcmliZSgnbWVzc2FnZTMnLCBmdW5jdGlvbiAoKSB7fSk7XG4gICAqIHB1YnN1Yi51bnN1YnNjcmliZUFsbCgpO1xuICAgKiBwdWJzdWIuaGFzU3Vic2NyaWJlcnMoKTsgLy8gLT4gZmFsc2VcbiAgICovXG4gIFB1YlN1Yi5wcm90b3R5cGUudW5zdWJzY3JpYmVBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcHVic3ViX3RvcGljcyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlcmUgYXJlIHN1YnNjcmliZXJzIGZvciBhIHNwZWNpZmljIHRvcGljLlxuICAgKiBJZiBgdG9waWNgIGlzIG5vdCBwcm92aWRlZCwgY2hlY2tzIGlmIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSBzdWJzY3JpYmVyLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgUHViU3ViXG4gICAqIEB0aGlzIHtQdWJTdWJ9XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdG9waWNdIFRoZSB0b3BpYydzIG5hbWUgdG8gY2hlY2tcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgdGhlcmUgYXJlIHN1YnNjcmliZXJzOyBvdGhlcndpc2UgYGZhbHNlYFxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiB2YXIgcHVic3ViID0gbmV3IFB1YlN1YigpO1xuICAgKiBwdWJzdWIub24oJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgKiAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgKiB9KTtcbiAgICpcbiAgICogcHVic3ViLmhhc1N1YnNjcmliZXJzKCdtZXNzYWdlJyk7XG4gICAqIC8vIC0+IHRydWVcbiAgICovXG4gIFB1YlN1Yi5wcm90b3R5cGUuaGFzU3Vic2NyaWJlcnMgPSBmdW5jdGlvbiAodG9waWMpIHtcbiAgICB2YXIgdG9waWNzID0gdGhpcy5fcHVic3ViX3RvcGljcztcbiAgICB2YXIgaGFzU3Vic2NyaWJlcnMgPSBmYWxzZTtcblxuICAgIC8vIElmIG5vIGFyZ3VtZW50cyBwYXNzZWRcbiAgICBpZiAodG9waWMgPT0gbnVsbCkge1xuICAgICAgZm9yT3duKHRvcGljcywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIGhhc1N1YnNjcmliZXJzID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gaGFzU3Vic2NyaWJlcnM7XG4gICAgfVxuXG4gICAgLy8gSWYgYSB0b3BpYydzIG5hbWUgaXMgcGFzc2VkIGFzIGFyZ3VtZW50XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0b3BpY3MsIHRvcGljKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0cyBhbGwgdGhlIHN1YnNjcmliZXJzIGFzIGEgc2V0IG9mIGtleSB2YWx1ZSBwYWlycyB0aGF0XG4gICAqIHJlcHJlc2VudCB0aGUgdG9waWMncyBuYW1lIGFuZCB0aGUgZXZlbnQgbGlzdGVuZXIocykgYm91bmQuXG4gICAqXG4gICAqIEBOT1RFIE11dGF0aW5nIHRoZSByZXN1bHQgb2YgdGhpcyBtZXRob2QgZG9lcyBub3QgYWZmZWN0IHRoZSByZWFsIHN1YnNjcmliZXJzLiBUaGlzIGlzIGZvciByZWZlcmVuY2Ugb25seS5cbiAgICpcbiAgICogQG1lbWJlcm9mIFB1YlN1YlxuICAgKiBAdGhpcyB7UHViU3VifVxuICAgKiBAcmV0dXJuIHtvYmplY3R9IEEgcmVhZG9ubHkgb2JqZWN0IHdpdGggYWxsIHN1YnNjcmliZXJzLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiB2YXIgcHVic3ViID0gbmV3IFB1YlN1YigpO1xuICAgKlxuICAgKiBwdWJzdWIuc3Vic2NyaWJlKCdtZXNzYWdlJywgbGlzdGVuZXIpO1xuICAgKiBwdWJzdWIuc3Vic2NyaWJlKCdtZXNzYWdlJywgbGlzdGVuZXIpO1xuICAgKiBwdWJzdWIuc3Vic2NyaWJlKCdhbm90aGVyX21lc3NhZ2UnLCBsaXN0ZW5lcik7XG4gICAqXG4gICAqIHB1YnN1Yi5zdWJzY3JpYmVycygpO1xuICAgKiAvLyAtPiBPYmplY3QgeyBtZXNzYWdlOiBBcnJheVsyXSwgYW5vdGhlcl9tZXNzYWdlOiBBcnJheVsxXSB9XG4gICAqL1xuICBQdWJTdWIucHJvdG90eXBlLnN1YnNjcmliZXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXMgPSB7fTtcbiAgICBmb3JPd24odGhpcy5fcHVic3ViX3RvcGljcywgZnVuY3Rpb24gKHRvcGljVmFsdWUsIHRvcGljS2V5KSB7XG4gICAgICByZXNbdG9waWNLZXldID0gdG9waWNWYWx1ZS5zbGljZSgwKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHN1YnNjcmliZXJzIGZvciBhIHNwZWNpZmljIHRvcGljLlxuICAgKlxuICAgKiBATk9URSBNdXRhdGluZyB0aGUgcmVzdWx0IG9mIHRoaXMgbWV0aG9kIGRvZXMgbm90IGFmZmVjdCB0aGUgcmVhbCBzdWJzY3JpYmVycy4gVGhpcyBpcyBmb3IgcmVmZXJlbmNlIG9ubHkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBQdWJTdWJcbiAgICogQHRoaXMge1B1YlN1Yn1cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcGljIFRoZSB0b3BpYydzIG5hbWUgdG8gY2hlY2sgZm9yIHN1YnNjcmliZXJzXG4gICAqIEByZXR1cm4ge2FycmF5fSBBIGNvcHkgYXJyYXkgb2YgYWxsIHN1YnNjcmliZXJzIGZvciBhIHRvcGljIGlmIGV4aXN0OyBvdGhlcndpc2UgYW4gZW1wdHkgYXJyYXlcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIHB1YnN1YiA9IG5ldyBQdWJTdWIoKTtcbiAgICpcbiAgICogcHVic3ViLnN1YnNjcmliZSgnbWVzc2FnZScsIGxpc3RlbmVyMSk7XG4gICAqIHB1YnN1Yi5zdWJzY3JpYmVPbmNlKCdtZXNzYWdlJywgbGlzdGVuZXIyKTtcbiAgICogcHVic3ViLnN1YnNjcmliZSgnYW5vdGhlcl9tZXNzYWdlJywgbGlzdGVuZXIxKTtcbiAgICpcbiAgICogcHVic3ViLnN1YnNjcmliZXJzQnlUb3BpYygnbWVzc2FnZScpO1xuICAgKiAvLyAtPiBBcnJheSBbe3Rva2VuOiAwLCBvbmNlOiBmYWxzZSwgY2FsbGJhY2s6IGxpc3RlbmVyMSgpfSwge3Rva2VuOiAxLCBvbmNlOiB0cnVlLCBjYWxsYmFjazogbGlzdGVuZXIyKCl9XVxuICAgKlxuICAgKiBwdWJzdWIuc3Vic2NyaWJlcnNCeVRvcGljKCdhbm90aGVyX21lc3NhZ2UnKTtcbiAgICogLy8gLT4gQXJyYXkgW3t0b2tlbjogMiwgb25jZTogZmFsc2UsIGNhbGxiYWNrOiBsaXN0ZW5lcjEoKX1dXG4gICAqXG4gICAqIHB1YnN1Yi5zdWJzY3JpYmVyc0J5VG9waWMoJ3NvbWVfbWVzc2FnZV9ub3RfZXhpc3RpbmcnKTtcbiAgICogLy8gLT4gQXJyYXkgW11cbiAgICovXG4gIFB1YlN1Yi5wcm90b3R5cGUuc3Vic2NyaWJlcnNCeVRvcGljID0gZnVuY3Rpb24gKHRvcGljKSB7XG4gICAgcmV0dXJuIHRoaXMuX3B1YnN1Yl90b3BpY3NbdG9waWNdID8gdGhpcy5fcHVic3ViX3RvcGljc1t0b3BpY10uc2xpY2UoMCkgOiBbXTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbGlhc2VzIGZvciBwdWJsaWMgbWV0aG9kcy5cbiAgICpcbiAgICogQG1lbWJlcm9mIFB1YlN1YlxuICAgKiBAdGhpcyB7UHViU3VifVxuICAgKiBAcGFyYW0ge29iamVjdH0gYWxpYXNNYXAgQSBwbGFpbiBvYmplY3QgdGhhdCBtYXBzIHRoZSBwdWJsaWMgbWV0aG9kcyB0byB0aGVpciBhbGlhc2VzLlxuICAgKiBAcmV0dXJuIHtQdWJTdWJ9IFRoZSBQdWJTdWIgaW5zdGFuY2UuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIHZhciBwdWJzdWIgPSBuZXcgUHViU3ViKCkuYWxpYXMoe1xuICAgKiAgIHN1YnNjcmliZTogJ29uJyxcbiAgICogICBzdWJzY3JpYmVPbmNlOiAnb25jZScsXG4gICAqICAgcHVibGlzaDogJ3RyaWdnZXInLFxuICAgKiAgIHB1Ymxpc2hTeW5jOiAndHJpZ2dlclN5bmMnLFxuICAgKiAgIHVuc3Vic2NyaWJlOiAnb2ZmJyxcbiAgICogICBoYXNTdWJzY3JpYmVyczogJ2hhcydcbiAgICogfSk7XG4gICAqL1xuICBQdWJTdWIucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKGFsaWFzTWFwKSB7XG4gICAgZm9yT3duKGFsaWFzTWFwLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgaWYgKFB1YlN1Yi5wcm90b3R5cGVba2V5XSkge1xuICAgICAgICBQdWJTdWIucHJvdG90eXBlW2FsaWFzTWFwW2tleV1dID0gYWxpYXMoa2V5KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSb2xscyBiYWNrIHRoZSBnbG9iYWwgYFB1YlN1YmAgaWRlbnRpZmllciBhbmQgcmV0dXJucyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBrZWVwIHRoZSBnbG9iYWwgbmFtZXNwYWNlIGNsZWFuLCBvciBpdCBjYW4gYmUgdXNlZCB0byBoYXZlIG11bHRpcGxlIHNpbXVsdGFuZW91cyBsaWJyYXJpZXNcbiAgICogKGluY2x1ZGluZyBzZXBhcmF0ZSB2ZXJzaW9ucy9jb3BpZXMgb2YgYFB1YlN1YmApIGluIHRoZSBzYW1lIHByb2plY3Qgd2l0aG91dCBjb25mbGljdHMgb3ZlciB0aGUgYFB1YlN1YmAgZ2xvYmFsIGlkZW50aWZpZXIuXG4gICAqXG4gICAqIEBOT1RFIFRoZSBgUHViU3ViLm5vQ29uZmxpY3QoKWAgc3RhdGljIG1ldGhvZCBvbmx5IG1ha2VzIHNlbnNlIHdoZW4gdXNlZCBpbiBhIG5vcm1hbCBicm93c2VyIGdsb2JhbCBuYW1lc3BhY2UgZW52aXJvbm1lbnQuXG4gICAqIEl0IHNob3VsZCBub3QgYmUgdXNlZCB3aXRoIENvbW1vbkpTIG9yIEFNRCBzdHlsZSBtb2R1bGVzLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgUHViU3ViXG4gICAqIEByZXR1cm4ge1B1YlN1Yn0gVGhlIFB1YlN1YiBjb25zdHJ1Y3Rvci5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIEV2ZW50RW1pdHRlciA9IFB1YlN1Yi5ub0NvbmZsaWN0KCk7XG4gICAqIHZhciBlbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgKi9cbiAgUHViU3ViLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICBjb250ZXh0W25hbWVdID0gT0xEX1BVQkxJQ19BUEk7XG4gICAgfVxuICAgIHJldHVybiBQdWJTdWI7XG4gIH07XG5cbiAgcmV0dXJuIFB1YlN1Yjtcbn0pKTtcbiIsImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi9IZWxwZXJzL0JlaGF2aW9ycyc7XG5cbkBPYnNlcnZhYmxlXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlQ3JlYXRpdmUge1xuICBjb25zdHJ1Y3Rvcigpe31cbiAgZ2V0IGR1cmF0aW9uKCkgeyByZXR1cm4gLTIgfVxuICBnZXQgcmVtYWluaW5nKCkgeyByZXR1cm4gLTIgfVxuICBzZXQgdm9sdW1lKHYpIHt9XG4gIHBsYXkoKSB7fVxuICBwYXVzZSgpIHt9XG4gIGRlc3Ryb3koKSB7fVxuICBwdWJsaXNoKCkge31cbiAgc3Vic2NyaWJlKCkge31cbiAgdW5zdWJzY3JpYmUoKSB7fVxufSIsImltcG9ydCAqIGFzIFZQQUlERXZlbnRzIGZyb20gJy4uLy4uL0VudW0vVlBBSURFdmVudHMnO1xuaW1wb3J0IFRpbWVVcGRhdGVIYW5kbGVyIGZyb20gJy4vVGltZVVwZGF0ZUhhbmRsZXInO1xuaW1wb3J0IFRpbWVFdmVudCBmcm9tICcuL1RpbWVFdmVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1YXJ0aWxlVGltZVVwZGF0ZUhhbmRsZXIgZXh0ZW5kcyBUaW1lVXBkYXRlSGFuZGxlciB7XG4gIGdlbmVyYXRlVGltZUV2ZW50cyhkdXJhdGlvbikge1xuICAgIGNvbnN0IHF1YXJ0aWxlID0gZHVyYXRpb24gLyA0O1xuICAgIHJldHVybiBbXG4gICAgICBuZXcgVGltZUV2ZW50KFZQQUlERXZlbnRzLkFEX1ZJREVPX0ZJUlNUX1FVQVJUSUxFLCBxdWFydGlsZSksXG4gICAgICBuZXcgVGltZUV2ZW50KFZQQUlERXZlbnRzLkFEX1ZJREVPX01JRFBPSU5ULCBxdWFydGlsZSAqIDIpLFxuICAgICAgbmV3IFRpbWVFdmVudChWUEFJREV2ZW50cy5BRF9WSURFT19USElSRF9RVUFSVElMRSwgcXVhcnRpbGUgKiAzKVxuICAgIF07XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lRXZlbnQge1xuICBjb25zdHJ1Y3RvcihldmVudE5hbWUsIGV2ZW50VGltZSkge1xuICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xuICAgIHRoaXMuZXZlbnRUaW1lID0gZXZlbnRUaW1lO1xuICAgIHRoaXMuZmlyZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGRpZEV2ZW50T2NjdXIoY3VycmVudFRpbWUpIHtcbiAgICBpZighdGhpcy5maXJlZCAmJiBjdXJyZW50VGltZSA+IHRoaXMuZXZlbnRUaW1lKSB7XG4gICAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzLmV2ZW50TmFtZTtcbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQgKiBhcyBWUEFJREV2ZW50cyBmcm9tICcuLi8uLi9FbnVtL1ZQQUlERXZlbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZVVwZGF0ZUhhbmRsZXIge1xuICBjb25zdHJ1Y3RvcihkdXJhdGlvbikge1xuICAgIHRoaXMubGFzdFRpbWUgPSB0aGlzLm5vdztcbiAgICB0aGlzLlVQREFURV9USFJFU0hPTEQgPSAyNTA7XG4gICAgdGhpcy50aW1lRXZlbnRzID0gdGhpcy5nZW5lcmF0ZVRpbWVFdmVudHMoZHVyYXRpb24pO1xuICB9XG5cbiAgZ2VuZXJhdGVUaW1lRXZlbnRzKGR1cmF0aW9uKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29sbGVjdEV2ZW50cyhjdXJyZW50VGltZSkge1xuICAgIHJldHVybiB0aGlzLnRpbWVFdmVudHMucmVkdWNlKCAoY29sbGVjdGVkLCB0aW1lRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IG9jY3VycmVkID0gdGltZUV2ZW50LmRpZEV2ZW50T2NjdXIoY3VycmVudFRpbWUpO1xuICAgICAgaWYob2NjdXJyZWQpIHtcbiAgICAgICAgY29sbGVjdGVkLnB1c2gob2NjdXJyZWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbGxlY3RlZDtcbiAgICB9LCBbXSk7XG4gIH1cblxuICBvblRpbWVVcGRhdGUoZXZlbnQpIHtcbiAgICBsZXQgcHVibGljYXRpb25zID0gW10sIGN1cnJlbnRUaW1lID0gZXZlbnQudGFyZ2V0LmN1cnJlbnRUaW1lO1xuXG4gICAgaWYodGhpcy5ub3cgPiB0aGlzLmxhc3RUaW1lICsgdGhpcy5VUERBVEVfVEhSRVNIT0xEKSB7XG4gICAgICBwdWJsaWNhdGlvbnMgPSBbLi4udGhpcy5jb2xsZWN0RXZlbnRzKGN1cnJlbnRUaW1lKSwgVlBBSURFdmVudHMuQURfUkVNQUlOSU5HX1RJTUVfQ0hBTkdFXTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RUaW1lID0gdGhpcy5ub3c7XG5cbiAgICByZXR1cm4gcHVibGljYXRpb25zO1xuICB9XG5cbiAgZ2V0IG5vdygpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7IFxuICB9XG59IiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgTGlzdGVuYWJsZSB9IGZyb20gXCIuLi9IZWxwZXJzL0JlaGF2aW9yc1wiO1xuaW1wb3J0ICogYXMgVlBBSURFdmVudHMgZnJvbSBcIi4uL0VudW0vVlBBSURFdmVudHNcIjtcbmltcG9ydCBCYXNlQ3JlYXRpdmUgZnJvbSBcIi4vQmFzZUNyZWF0aXZlXCI7XG5pbXBvcnQgUXVhcnRpbGVUaW1lVXBkYXRlSGFuZGxlciBmcm9tIFwiLi9UaW1lcnMvUXVhcnRpbGVUaW1lVXBkYXRlSGFuZGxlclwiO1xuXG5ATGlzdGVuYWJsZVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlkZW9DcmVhdGl2ZSBleHRlbmRzIEJhc2VDcmVhdGl2ZSB7XG4gIGNvbnN0cnVjdG9yKHZpZGVvRWxlbWVudCwgeyB2aWRlb1VSTCB9LCBwYXJlbnRJbnRlcmZhY2UpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKHZpZGVvRWxlbWVudCAmJiB2aWRlb1VSTCkge1xuICAgICAgdGhpcy5pbml0aWFsaXplU3RhdGUodmlkZW9FbGVtZW50LCB2aWRlb1VSTCk7XG4gICAgICB0aGlzLnJlZ2lzdGVyRXZlbnRzKHZpZGVvRWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiRmF0YWwgRXJyb3IgLSB2aWRlb0VsZW1lbnQgb3IgdmlkZW9VUkwgbm90IHByb3ZpZGVkXCI7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGR1cmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZpZGVvRWwuZHVyYXRpb24gPiAwID8gdGhpcy52aWRlb0VsLmR1cmF0aW9uIDogLTI7XG4gIH1cblxuICBnZXQgcmVtYWluaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnZpZGVvRWwuZHVyYXRpb25cbiAgICAgID8gdGhpcy52aWRlb0VsLmR1cmF0aW9uIC0gdGhpcy52aWRlb0VsLmN1cnJlbnRUaW1lXG4gICAgICA6IC0yO1xuICB9XG5cbiAgZ2V0IHZvbHVtZSgpIHtcbiAgICBpZiAodGhpcy52aWRlb0VsKSB7XG4gICAgICB0aGlzLnZpZGVvRWwudm9sdW1lO1xuICAgIH1cbiAgfVxuXG4gIHNldCB2b2x1bWUodikge1xuICAgIGlmICh0aGlzLnZpZGVvRWwgJiYgIWlzTmFOKHYpKSB7XG4gICAgICB0aGlzLnZpZGVvRWwudm9sdW1lID0gdjtcbiAgICB9XG4gIH1cblxuICBwbGF5KCkge1xuICAgIGlmICh0aGlzLnZpZGVvRWwpIHtcbiAgICAgIHRoaXMudmlkZW9FbC5wbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgcGF1c2UoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbCkge1xuICAgICAgdGhpcy52aWRlb0VsLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgaW5pdGlhbGl6ZVN0YXRlKHZpZGVvRWxlbWVudCwgdmlkZW9VUkwpIHtcbiAgICAvLyB0aGlzLnZpZGVvRWwgPSB2aWRlb0VsZW1lbnQ7XG4gICAgLy8gdGhpcy52aWRlb1VSTCA9IHZpZGVvVVJMO1xuICAgIC8vIHRoaXMudmlkZW9FbC5hdXRvcGxheSA9IHRydWU7XG4gICAgLy8gdGhpcy52aWRlb0VsLnNyYyA9IHZpZGVvVVJMO1xuICAgIC8vIHRoaXMudmlkZW9FbC5wbGF5KCk7XG4gIH1cblxuICByZWdpc3RlckV2ZW50cyh2aWRlb0VsZW1lbnQpIHtcbiAgICB0aGlzLnJlZ2lzdGVyTGlzdGVuZXIoXG4gICAgICB2aWRlb0VsZW1lbnQsXG4gICAgICBcImxvYWRlZG1ldGFkYXRhXCIsXG4gICAgICB0aGlzLm9uTG9hZGVkTWV0YURhdGEsXG4gICAgICB0aGlzLFxuICAgICk7XG4gICAgdGhpcy5yZWdpc3Rlckxpc3RlbmVyKHZpZGVvRWxlbWVudCwgXCJlbmRlZFwiLCB0aGlzLm9uRW5kZWQsIHRoaXMpO1xuICB9XG5cbiAgLy8gdG8gZG8gLSBzdXBwb3J0IGNvbmZpZ3VyYWJsZSB0aW1lIHVwZGF0ZSBoYW5kbGVyXG4gIG9uTG9hZGVkTWV0YURhdGEoZXZlbnQpIHtcbiAgICB0aGlzLnRpbWVVcGRhdGVIYW5kbGVyID0gbmV3IFF1YXJ0aWxlVGltZVVwZGF0ZUhhbmRsZXIoXG4gICAgICBldmVudC50YXJnZXQuZHVyYXRpb24sXG4gICAgKTtcbiAgICB0aGlzLnJlZ2lzdGVyTGlzdGVuZXIoZXZlbnQudGFyZ2V0LCBcInRpbWV1cGRhdGVcIiwgdGhpcy5vblRpbWVVcGRhdGUsIHRoaXMpO1xuICAgIHRoaXMudW5yZWdpc3Rlckxpc3RlbmVyKGV2ZW50LnRhcmdldCwgXCJsb2FkZWRtZXRhZGF0YVwiKTtcbiAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfRFVSQVRJT05fQ0hBTkdFKTtcbiAgfVxuXG4gIG9uVGltZVVwZGF0ZShldmVudCkge1xuICAgIGNvbnN0IHVwZGF0ZXMgPSB0aGlzLnRpbWVVcGRhdGVIYW5kbGVyLm9uVGltZVVwZGF0ZShldmVudCk7XG4gICAgdGhpcy5wdWJsaXNoQWxsKHVwZGF0ZXMpO1xuICB9XG5cbiAgb25FbmRlZCgpIHtcbiAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfVklERU9fQ09NUExFVEUpO1xuICAgIHRoaXMucHVibGlzaChWUEFJREV2ZW50cy5BRF9TVE9QUEVEKTtcbiAgICB0aGlzLmRlc3RvcnkoKTtcbiAgfVxuXG4gIGRlc3RvcnkoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbCkge1xuICAgICAgdGhpcy52aWRlb0VsLnBhdXNlKCk7XG4gICAgICB0aGlzLnVucmVnaXN0ZXJBbGwoKTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBBRF9MT0FERUQgICAgICAgICAgICAgICAgID0gJ0FkTG9hZGVkJztcbmV4cG9ydCBjb25zdCBBRF9TVEFSVEVEICAgICAgICAgICAgICAgID0gJ0FkU3RhcnRlZCc7XG5leHBvcnQgY29uc3QgQURfU1RPUFBFRCAgICAgICAgICAgICAgICA9ICdBZFN0b3BwZWQnO1xuZXhwb3J0IGNvbnN0IEFEX1NLSVBQRUQgICAgICAgICAgICAgICAgPSAnQWRTa2lwcGVkJztcbmV4cG9ydCBjb25zdCBBRF9TS0lQUEFCTEVfU1RBVEVfQ0hBTkdFID0gJ0FkU2tpcHBhYmxlU3RhdGVDaGFuZ2UnO1xuZXhwb3J0IGNvbnN0IEFEX1NJWkVfQ0hBTkdFICAgICAgICAgICAgPSAnQWRTaXplQ2hhbmdlJztcbmV4cG9ydCBjb25zdCBBRF9MSU5FQVJfQ0hBTkdFICAgICAgICAgID0gJ0FkTGluZWFyQ2hhbmdlJztcbmV4cG9ydCBjb25zdCBBRF9EVVJBVElPTl9DSEFOR0UgICAgICAgID0gJ0FkRHVyYXRpb25DaGFuZ2UnO1xuZXhwb3J0IGNvbnN0IEFEX0VYUEFOREVEX0NIQU5HRSAgICAgICAgPSAnQWRFeHBhbmRlZENoYW5nZSc7XG5leHBvcnQgY29uc3QgQURfUkVNQUlOSU5HX1RJTUVfQ0hBTkdFICA9ICdBZFJlbWFpbmluZ1RpbWVDaGFuZ2UnO1xuZXhwb3J0IGNvbnN0IEFEX1ZPTFVNRV9DSEFOR0UgICAgICAgICAgPSAnQWRWb2x1bWVDaGFuZ2UnO1xuZXhwb3J0IGNvbnN0IEFEX0lNUFJFU1NJT04gICAgICAgICAgICAgPSAnQWRJbXByZXNzaW9uJztcbmV4cG9ydCBjb25zdCBBRF9WSURFT19TVEFSVCAgICAgICAgICAgID0gJ0FkVmlkZW9TdGFydCc7XG5leHBvcnQgY29uc3QgQURfVklERU9fRklSU1RfUVVBUlRJTEUgICA9ICdBZFZpZGVvRmlyc3RRdWFydGlsZSc7XG5leHBvcnQgY29uc3QgQURfVklERU9fTUlEUE9JTlQgICAgICAgICA9ICdBZFZpZGVvTWlkcG9pbnQnO1xuZXhwb3J0IGNvbnN0IEFEX1ZJREVPX1RISVJEX1FVQVJUSUxFICAgPSAnQWRWaWRlb1RoaXJkUXVhcnRpbGUnO1xuZXhwb3J0IGNvbnN0IEFEX1ZJREVPX0NPTVBMRVRFICAgICAgICAgPSAnQWRWaWRlb0NvbXBsZXRlJztcbmV4cG9ydCBjb25zdCBBRF9DTElDS19USFJVICAgICAgICAgICAgID0gJ0FkQ2xpY2tUaHJ1JztcbmV4cG9ydCBjb25zdCBBRF9JTlRFUkFDVElPTiAgICAgICAgICAgID0gJ0FkSW50ZXJhY3Rpb24nO1xuZXhwb3J0IGNvbnN0IEFEX1VTRVJfQUNDRVBUX0lOVklUQVRJT04gPSAnQWRVc2VyQWNjZXB0SW52aXRhdGlvbic7XG5leHBvcnQgY29uc3QgQURfVVNFUl9NSU5JTUlaRSAgICAgICAgICA9ICdBZFVzZXJNaW5pbWl6ZSc7XG5leHBvcnQgY29uc3QgQURfVVNFUl9DTE9TRSAgICAgICAgICAgICA9ICdBZFVzZXJDbG9zZSc7XG5leHBvcnQgY29uc3QgQURfUEFVU0VEICAgICAgICAgICAgICAgICA9ICdBZFBhdXNlZCc7XG5leHBvcnQgY29uc3QgQURfUExBWUlORyAgICAgICAgICAgICAgICA9ICdBZFBsYXlpbmcnO1xuZXhwb3J0IGNvbnN0IEFEX0xPRyAgICAgICAgICAgICAgICAgICAgPSAnQWRMb2cnO1xuZXhwb3J0IGNvbnN0IEFEX0VSUk9SICAgICAgICAgICAgICAgICAgPSAnQWRFcnJvcic7IiwiaW1wb3J0IFB1YlN1YiBmcm9tICdQdWJTdWInO1xuXG4vLyBBZGQgcHViIHN1YiBiZWhhdmlvciB0byBzdWJqZWN0IGNsYXNzXG5leHBvcnQgY29uc3QgT2JzZXJ2YWJsZSA9IHN1YmplY3QgPT4gY2xhc3MgZXh0ZW5kcyBzdWJqZWN0IHtcbiAgc3Vic2NyaWJlKGZuLCBldmVudCwgbGlzdGVuZXJTY29wZSkge1xuICAgIHRoaXMucHVic3ViID0gdGhpcy5wdWJzdWIgfHwgbmV3IFB1YlN1YigpO1xuICAgIHRoaXMucHVic3ViLnN1YnNjcmliZShldmVudCwgZm4uYmluZChsaXN0ZW5lclNjb3BlKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB1bnN1YnNjcmliZShmbiwgZXZlbnQpIHtcbiAgICB0aGlzLnB1YnN1YiA9IHRoaXMucHVic3ViIHx8IG5ldyBQdWJTdWIoKTtcbiAgICB0aGlzLnB1YnN1Yi51bnN1YnNjcmliZShldmVudCwgZm4pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGlzaChldmVudCwgYXJncykge1xuICAgIHRoaXMucHVic3ViID0gdGhpcy5wdWJzdWIgfHwgbmV3IFB1YlN1YigpO1xuICAgIHRoaXMucHVic3ViLnB1Ymxpc2goZXZlbnQsIGFyZ3MpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gdG8gZG8gLSBzdXBwb3J0IG11bHRpcGxlIGV2ZW50IGFyZ3VtZW50c1xuICBwdWJsaXNoQWxsKGV2ZW50cykge1xuICAgIGlmKCFldmVudHMpIHsgcmV0dXJuIH1cbiAgICB0aGlzLnB1YnN1YiA9IHRoaXMucHVic3ViIHx8IG5ldyBQdWJTdWIoKTtcbiAgICBldmVudHMgPSBBcnJheS5pc0FycmF5KGV2ZW50cykgPyBldmVudHMgOiBbZXZlbnRzXTtcbiAgICBldmVudHMuZm9yRWFjaCh0aGlzLnB1Ymxpc2guYmluZCh0aGlzKSk7XG4gIH1cbn07XG5cblxuLy8gQWRkIERPTSBldmVudCBoYW5kbGVycyB3aXRoIGVhc3kgdW5yZWdpc3RyYXRpb24gb2YgYWxsIGxpc3RlbmVycyBcbmV4cG9ydCBjb25zdCBMaXN0ZW5hYmxlID0gc3ViamVjdCA9PiBjbGFzcyBleHRlbmRzIHN1YmplY3Qge1xuICByZWdpc3Rlckxpc3RlbmVyKGVsLCBldmVudE5hbWUsIGZuLCBzY29wZSkge1xuICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMgfHwgW107XG4gICAgZm4gPSBmbi5iaW5kKHNjb3BlKTtcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKHsgZWwsIGV2ZW50TmFtZSwgZm4gfSk7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZuKTtcbiAgfVxuXG4gIHVucmVnaXN0ZXJMaXN0ZW5lcihlbCwgbmFtZSkge1xuICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMgfHwgW107XG4gICAgdGhpcy5saXN0ZW5lcnMuZmlsdGVyKCBsID0+IGwuZXZlbnROYW1lID09PSBuYW1lKS5mb3JFYWNoKCBsID0+IGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIobC5ldmVudE5hbWUsIGwuZm4pICk7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycy5maWx0ZXIoIGwgPT4gbC5ldmVudE5hbWUgIT09IG5hbWUgKTtcbiAgfVxuXG4gIHVucmVnaXN0ZXJBbGwoKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycyB8fCBbXTtcbiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKCBsID0+IGwuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihsLmV2ZW50TmFtZSwgbC5mbikgKTtcbiAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICB9XG5cbn0iLCJpbXBvcnQgQmFzZUNyZWF0aXZlIGZyb20gJy4uL0NyZWF0aXZlcy9CYXNlQ3JlYXRpdmUnO1xuaW1wb3J0IEJhc2VPdmVybGF5IGZyb20gJy4uL092ZXJsYXlzL0Jhc2VPdmVybGF5JztcbmltcG9ydCBCYXNlUGFyc2VyIGZyb20gJy4uL1BhcnNlcnMvQmFzZVBhcnNlcic7XG5cbmV4cG9ydCBjb25zdCBWYWxpZGF0ZUNsYXNzID0gKHN1YmplY3QsIHBhcmVudCkgPT4ge1xuICByZXR1cm4gc3ViamVjdC5wcm90b3R5cGUgaW5zdGFuY2VvZiBwYXJlbnQ7XG59O1xuXG5leHBvcnQgY29uc3QgVmFsaWRDcmVhdGl2ZSA9IHN1YmplY3QgPT4ge1xuICBpZih0eXBlb2Ygc3ViamVjdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZihWYWxpZGF0ZUNsYXNzKHN1YmplY3QsIEJhc2VDcmVhdGl2ZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyAnSW52YWxpZCBjcmVhdGl2ZSBwcm92aWRlZC4gU2hvdWxkIGluaGVyaXQgZnJvbSBCYXNlQ3JlYXRpdmUgb3IgVmlkZW9DcmVhdGl2ZSc7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IFZhbGlkT3ZlcmxheSA9IHN1YmplY3QgPT4ge1xuICBpZih0eXBlb2Ygc3ViamVjdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZihWYWxpZGF0ZUNsYXNzKHN1YmplY3QsIEJhc2VPdmVybGF5KSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHRocm93ICdJbnZhbGlkIG92ZXJsYXkgcHJvdmlkZWQuIFNob3VsZCBpbmhlcml0IGZyb20gQmFzZU92ZXJsYXkgb3IgU2ltcGxlQ29udHJvbHMnO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBWYWxpZFBhcnNlciA9IHN1YmplY3QgPT4ge1xuICBpZih0eXBlb2Ygc3ViamVjdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZihWYWxpZGF0ZUNsYXNzKHN1YmplY3QsIEJhc2VQYXJzZXIpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgJ0ludmFsaWQgcGFyc2VyIHByb3ZpZGVkLiBTaG91bGQgaW5oZXJpdCBmcm9tIEJhc2VQYXJzZXIgb3IgSlNPTlBhcnNlcic7XG4gIH1cbn07IiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL0hlbHBlcnMvQmVoYXZpb3JzJztcblxuQE9ic2VydmFibGVcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VPdmVybGF5IHtcbiAgY29uc3RydWN0b3IoKSB7fVxuICBzZXRTaXplKCkge31cbiAgZ2VuZXJhdGVDb250cm9scygpIHsgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsgfVxuICBkZXN0cm95KCkge31cbiAgcHVibGlzaCgpIHt9XG4gIHN1YnNjcmliZSgpIHt9XG4gIHVuc3Vic2NyaWJlKCkge31cbn0iLCJpbXBvcnQgeyBPYnNlcnZhYmxlLCBMaXN0ZW5hYmxlIH0gZnJvbSBcIi4uL0hlbHBlcnMvQmVoYXZpb3JzXCI7XG5pbXBvcnQgKiBhcyBWUEFJREV2ZW50cyBmcm9tIFwiLi4vRW51bS9WUEFJREV2ZW50c1wiO1xuaW1wb3J0IEJhc2VPdmVybGF5IGZyb20gXCIuL0Jhc2VPdmVybGF5XCI7XG5cbi8vIFNpbXBsZSBvdmVybGF5IGNsYXNzLiBIYW5kbGVzIGNsaWNrcy4gQ2FuIGJlIG92ZXJyaWRlbiB0byBwcm92aWRlIG1vcmUgY29tcGxpY2F0ZWQgdXNlciBpbnRlcmZhY2VcbkBMaXN0ZW5hYmxlXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDbGlja1Rocm91Z2hPdmVybGF5IGV4dGVuZHMgQmFzZU92ZXJsYXkge1xuICBjb25zdHJ1Y3RvcihzbG90RWwsIHsgY2xpY2tUaHJvdWdoIH0sIHsgc2l6ZSB9KSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmICh0eXBlb2Ygc2xvdEVsICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuc2xvdEVsID0gc2xvdEVsO1xuXG4gICAgICB2YXIgY29udHJvbHMgPSB0aGlzLmdlbmVyYXRlQ29udHJvbHMoKTtcbiAgICAgIHNsb3RFbC5hcHBlbmRDaGlsZChjb250cm9scyk7XG4gICAgICB2YXIgdGVrdG9rX3ZpZF9zbG90ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZWt0b2tfdmlkX3Nsb3RcIik7XG4gICAgICBpZiAoY2xpY2tUaHJvdWdoKSB7XG4gICAgICAgIHRoaXMuY2xpY2tUaHJvdWdoID0gY2xpY2tUaHJvdWdoO1xuICAgICAgICAvLyB0aGlzLnNldFNpemUoc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyTGlzdGVuZXIodGVrdG9rX3ZpZF9zbG90LCBcImNsaWNrXCIsIHRoaXMub25DbGljaywgdGhpcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiRmF0YWwgRXJyb3IgLSBzbG90IGVsZW1lbnQgbm90IHByb3ZpZGVkXCI7XG4gICAgfVxuICB9XG5cbiAgb25DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5wdWJsaXNoKFZQQUlERXZlbnRzLkFEX0NMSUNLX1RIUlUpO1xuICAgIHdpbmRvdy5vcGVuKHRoaXMuY2xpY2tUaHJvdWdoLCBcIl9ibGFua1wiKTtcbiAgfVxuXG4gIHNldFNpemUod2lkdGgsIGhlaWdodCkge1xuICAgIHRoaXMuc2xvdEVsLnN0eWxlID0gYGN1cnNvcjogcG9pbnRlcjsgd2lkdGg6ICR7d2lkdGh9cHg7IGhlaWdodDogJHtoZWlnaHR9cHg7YDtcbiAgfVxuXG4gIC8vIG92ZXJyaWRlIHRoaXMgaWYgeW91IHdhbnQgdG8gaW5qZWN0IGN1c3RvbSBvdmVybGF5IGVsZW1lbnRzXG4gIGdlbmVyYXRlQ29udHJvbHMoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy51bnJlZ2lzdGVyQWxsKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VQYXJzZXIge1xuICBzdGF0aWMgcGFyc2VBZFBhcmFtZXRlcnMoKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG59IiwiaW1wb3J0IEJhc2VQYXJzZXIgZnJvbSAnLi9CYXNlUGFyc2VyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSlNPTlBhcnNlciBleHRlbmRzIEJhc2VQYXJzZXIge1xuICBzdGF0aWMgcGFyc2VBZFBhcmFtZXRlcnMocGFyYW1ldGVyc1N0cmluZykge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHBhcmFtZXRlcnNTdHJpbmcpO1xuICB9XG59IiwiaW1wb3J0IFZQQUlETWV0aG9kcyBmcm9tICcuL1ZQQUlETWV0aG9kcyc7XG5pbXBvcnQgVlBBSURQcm9wZXJ0aWVzIGZyb20gJy4vVlBBSURQcm9wZXJ0aWVzJztcblxuZXhwb3J0IHtcbiAgVlBBSURNZXRob2RzLFxuICBWUEFJRFByb3BlcnRpZXNcbn0iLCJpbXBvcnQgKiBhcyBWUEFJREV2ZW50cyBmcm9tIFwiLi4vRW51bS9WUEFJREV2ZW50c1wiO1xuXG5leHBvcnQgZGVmYXVsdCAoc3ViamVjdCkgPT5cbiAgY2xhc3MgZXh0ZW5kcyBzdWJqZWN0IHtcbiAgICBpbml0QWQoXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIHZpZXdNb2RlLFxuICAgICAgZGVzaXJlZEJpdHJhdGUsXG4gICAgICBjcmVhdGl2ZURhdGEgPSB7fSxcbiAgICAgIGVudmlyb25tZW50VmFycyA9IHt9LFxuICAgICkge1xuICAgICAgdGhpcy51cGRhdGVTdGF0ZUZyb21Jbml0QWQoe1xuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0LFxuICAgICAgICB2aWV3TW9kZSxcbiAgICAgICAgY3JlYXRpdmVEYXRhLFxuICAgICAgICBlbnZpcm9ubWVudFZhcnMsXG4gICAgICB9KTtcbiAgICAgIHRoaXMucGFyc2VBZFBhcmFtZXRlcnMoY3JlYXRpdmVEYXRhLkFkUGFyYW1ldGVycyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwYXJzZUFkUGFyYW1ldGVycyhhZFBhcmFtZXRlcnMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIHBhcnNlQWRQYXJhbWV0ZXJzIGNvdWxkIGJlIGFzeW5jLCBzbyB3ZSBwYXNzIGl0IHRocm91Z2ggUHJvbWlzZS5hbGwgdG8gaGFuZGxlIHN5bmMgYW5kIGFzeW5jIGNhc2VzXG4gICAgICAgIFByb21pc2UuYWxsKFt0aGlzLlBhcnNlci5wYXJzZUFkUGFyYW1ldGVycyhhZFBhcmFtZXRlcnMpXSkudGhlbihcbiAgICAgICAgICB0aGlzLm9uQWRQYXJhbWV0ZXJzUGFyc2VkLmJpbmQodGhpcyksXG4gICAgICAgICAgdGhpcy5vbkFkUGFyc2VGYWlsLmJpbmQodGhpcyksXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRoaXMub25BZFBhcnNlRmFpbChlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc3RhcnRBZCgpIHtcbiAgICAgIHRoaXMuc2tpcHBhYmxlID0gdHJ1ZTtcbiAgICAgIHRoaXMucHVibGlzaChWUEFJREV2ZW50cy5BRF9JTVBSRVNTSU9OKTtcbiAgICAgIHRoaXMucHVibGlzaChWUEFJREV2ZW50cy5BRF9TVEFSVEVEKTtcbiAgICAgIHRoaXMucHVibGlzaChWUEFJREV2ZW50cy5BRF9WSURFT19TVEFSVCk7XG4gICAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfU0tJUFBBQkxFX1NUQVRFX0NIQU5HRSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBza2lwQWQoKSB7XG4gICAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfU0tJUFBFRCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzdG9wQWQoKSB7XG4gICAgICB0aGlzLmRlc3Ryb3kgJiYgdGhpcy5kZXN0cm95KCk7XG4gICAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfU1RPUFBFRCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwYXVzZUFkKCkge1xuICAgICAgaWYgKHRoaXMuYWQpIHtcbiAgICAgICAgdGhpcy5hZC5wYXVzZSgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfUEFVU0VEKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHJlc3VtZUFkKCkge1xuICAgICAgaWYgKHRoaXMuYWQpIHtcbiAgICAgICAgdGhpcy5hZC5wbGF5KCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHVibGlzaChWUEFJREV2ZW50cy5BRF9QTEFZSU5HKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNvbGxhcHNlQWQoKSB7XG4gICAgICB0aGlzLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfRVhQQU5ERURfQ0hBTkdFKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGV4cGFuZEFkKCkge1xuICAgICAgdGhpcy5leHBhbmRlZCA9IHRydWU7XG4gICAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfRVhQQU5ERURfQ0hBTkdFKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHJlc2l6ZUFkKHdpZHRoLCBoZWlnaHQsIHZpZXdNb2RlKSB7XG4gICAgICB0aGlzLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICB0aGlzLnZpZXdNb2RlID0gdmlld01vZGU7XG4gICAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfU0laRV9DSEFOR0UpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICBpZiAodGhpcy5zaXplKSB7XG4gICAgICAgIHRoaXMuc2l6ZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLnNpemUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5hZE92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5hZE92ZXJsYXkuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTdGF0ZUZyb21Jbml0QWQoe1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICB2aWV3TW9kZSxcbiAgICAgIGNyZWF0aXZlRGF0YSxcbiAgICAgIGVudmlyb25tZW50VmFycyxcbiAgICB9KSB7XG4gICAgICB0aGlzLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICB0aGlzLnZpZXdNb2RlID0gdmlld01vZGU7XG4gICAgICB0aGlzLmNyZWF0aXZlRGF0YSA9IHsgLi4uY3JlYXRpdmVEYXRhIH07XG4gICAgICB0aGlzLmVudmlyb25tZW50VmFycyA9IHsgLi4uZW52aXJvbm1lbnRWYXJzIH07XG4gICAgfVxuICB9O1xuIiwiZXhwb3J0IGRlZmF1bHQgc3ViamVjdCA9PiBjbGFzcyBleHRlbmRzIHN1YmplY3Qge1xuICBnZXRBZEV4cGFuZGVkKCkge1xuICAgIHJldHVybiB0aGlzLmV4cGFuZGVkOyBcbiAgfVxuXG4gIGdldEFkTGluZWFyKCkge1xuICAgIHJldHVybiB0cnVlOyBcbiAgfVxuXG4gIGdldEFkRHVyYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYWQgPyB0aGlzLmFkLmR1cmF0aW9uIDogLTI7XG4gIH1cblxuICBnZXRBZFJlbWFpbmluZ1RpbWUoKSB7IFxuICAgIHJldHVybiB0aGlzLmFkID8gdGhpcy5hZC5yZW1haW5pbmcgOiAtMjsgXG4gIH1cblxuICBnZXRBZFNraXBwYWJsZVN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLnNraXBwYWJsZTtcbiAgfVxuXG4gIGdldEFkVm9sdW1lKCkge1xuICAgcmV0dXJuIHRoaXMuYWQgJiYgIWlzTmFOKHRoaXMuYWQudm9sdW1lKSA/IHRoaXMuYWQudm9sdW1lIDogLTE7XG4gIH1cblxuICBnZXRBZENvbXBhbmlvbnMoKSB7IFxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGdldEFkSWNvbnMoKSB7XG4gICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRBZEhlaWdodCgpIHsgXG4gICAgcmV0dXJuIHRoaXMuc2l6ZSA/IHRoaXMuc2l6ZS5oZWlnaHQgOiAtMTtcbiAgfVxuXG4gIGdldEFkV2lkdGgoKSB7IFxuICAgIHJldHVybiB0aGlzLnNpemUgPyB0aGlzLnNpemUud2lkdGggOiAtMTtcbiAgfVxuXG4gIGhhbmRzaGFrZVZlcnNpb24oKSB7XG4gICAgcmV0dXJuICcyLjAnO1xuICB9XG5cbiAgc2V0QWRWb2x1bWUodm9sKSB7XG4gICAgaWYodGhpcy5hZCkge1xuICAgICAgdGhpcy5hZC52b2x1bWUgPSB2b2w7XG4gICAgfVxuICB9XG59IiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgTGlzdGVuYWJsZSB9IGZyb20gJy4vSGVscGVycy9CZWhhdmlvcnMnO1xuaW1wb3J0IHsgVmFsaWRDcmVhdGl2ZSwgVmFsaWRPdmVybGF5LCBWYWxpZFBhcnNlciB9IGZyb20gJy4vSGVscGVycy9WYWxpZGF0aW9uJztcbmltcG9ydCAqIGFzIFZQQUlERXZlbnRzIGZyb20gJy4vRW51bS9WUEFJREV2ZW50cyc7XG5cbmltcG9ydCB7IFZQQUlETWV0aG9kcywgVlBBSURQcm9wZXJ0aWVzIH0gZnJvbSAnLi9WUEFJRC9WUEFJRERlY29yYXRvcnMnO1xuaW1wb3J0IENsaWNrVGhyb3VnaE92ZXJsYXkgZnJvbSAnLi9PdmVybGF5cy9DbGlja1Rocm91Z2hPdmVybGF5JztcbmltcG9ydCBKU09OUGFyc2VyIGZyb20gJy4vUGFyc2Vycy9KU09OUGFyc2VyJztcbmltcG9ydCBWaWRlb0NyZWF0aXZlIGZyb20gJy4vQ3JlYXRpdmVzL1ZpZGVvQ3JlYXRpdmUnO1xuXG4vLyBJbXBsZW1lbnRzIHRoZSByZXF1aXJlZCBWUEFJRCBpbnRlcmZhY2UgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhcyBwZXIgdGhlIFZQQUlEIDIuMCBzcGVjaWZpY2F0aW9uIFxuLy8gaHR0cDovL3d3dy5pYWIubmV0L21lZGlhL2ZpbGUvVlBBSURfMi4wX0ZpbmFsXzA0LTEwLTIwMTIucGRmXG5AT2JzZXJ2YWJsZVxuQFZQQUlETWV0aG9kc1xuQFZQQUlEUHJvcGVydGllc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVlBBSURJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcihwYXJhbXMgPSB7fSkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZVN0YXRlKHBhcmFtcyk7XG4gICAgdGhpcy5hdHRhY2hWUEFJRChwYXJhbXMpO1xuICB9XG5cbiAgYXR0YWNoVlBBSUQocGFyYW1zKSB7XG4gICAgaWYocGFyYW1zLndpbmRvdyAmJiAhcGFyYW1zLndpbmRvdy5nZXRWUEFJREFkKSB7XG4gICAgICBwYXJhbXMud2luZG93LmdldFZQQUlEQWQgPSB0aGlzLmdldFZQQUlEQWQuYmluZCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICBpbml0aWFsaXplU3RhdGUocGFyYW1zKSB7XG4gICAgdGhpcy5leHBhbmRlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2tpcHBhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5zaXplID0ge1xuICAgICAgd2lkdGg6IDY0MCxcbiAgICAgIGhlaWdodDogMzYwXG4gICAgfTtcblxuICAgIHRoaXMuc2VsZWN0Q29tcG9uZW50cyhwYXJhbXMpO1xuICB9XG5cbiAgc2VsZWN0Q29tcG9uZW50cyhwYXJhbXMpIHtcbiAgICB0aGlzLkFkQ3JlYXRpdmUgPSBWYWxpZENyZWF0aXZlKHBhcmFtcy5jcmVhdGl2ZUZvcm1hdCkgPyBwYXJhbXMuY3JlYXRpdmVGb3JtYXQgOiBWaWRlb0NyZWF0aXZlO1xuICAgIHRoaXMuT3ZlcmxheSA9IFZhbGlkT3ZlcmxheShwYXJhbXMub3ZlcmxheXMpID8gcGFyYW1zLm92ZXJsYXlzIDogQ2xpY2tUaHJvdWdoT3ZlcmxheTtcbiAgICB0aGlzLlBhcnNlciA9IFZhbGlkUGFyc2VyKHBhcmFtcy5wYXJzZXIpID8gcGFyYW1zLnBhcnNlciA6IEpTT05QYXJzZXI7XG4gIH1cblxuICBnZXRWUEFJREFkKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgb25BZFBhcnNlRmFpbChlKSB7XG4gICAgY29uc29sZS5sb2coZSk7XG4gICAgdGhpcy5kZXN0cm95KCk7XG4gICAgdGhpcy5wdWJsaXNoKFZQQUlERXZlbnRzLkFEX0VSUk9SLCBgRXJyb3IgcGFyc2luZyBBZFBhcmFtZXRlcnMgLSAke2UudG9TdHJpbmcoKX1gKTtcbiAgICB0aGlzLnB1Ymxpc2goVlBBSURFdmVudHMuQURfU1RPUFBFRCk7XG4gIH1cblxuICBvbkFkUGFyYW1ldGVyc1BhcnNlZChbQWRQYXJhbWV0ZXJzXSkge1xuICAgIHRoaXMuYWQgPSBuZXcgdGhpcy5BZENyZWF0aXZlKHRoaXMuZW52aXJvbm1lbnRWYXJzLnZpZGVvU2xvdCwgQWRQYXJhbWV0ZXJzLCB0aGlzKTtcbiAgICB0aGlzLmFkT3ZlcmxheSA9IG5ldyB0aGlzLk92ZXJsYXkodGhpcy5lbnZpcm9ubWVudFZhcnMuc2xvdCwgQWRQYXJhbWV0ZXJzLCB0aGlzKTtcbiAgICAgIFxuICAgIC8vIEFsbG93IEFkIGFuZCBPdmVybGF5cyB0byBwdWJsaXNoIGFueSBvZiB0aGUgYXZhaWxhYmxlIHN0YW5kYXJkIFZQQUlEIGV2ZW50c1xuICAgIE9iamVjdC52YWx1ZXMoVlBBSURFdmVudHMpLmZvckVhY2goIEVWRU5UX05BTUUgPT4ge1xuICAgICAgdGhpcy5hZCAmJiB0aGlzLmFkLnN1YnNjcmliZSAmJiB0aGlzLmFkLnN1YnNjcmliZSh0aGlzLm9uQ3JlYXRpdmVFdmVudC5iaW5kKHRoaXMsIEVWRU5UX05BTUUpLCBFVkVOVF9OQU1FKTtcbiAgICAgIHRoaXMuYWRPdmVybGF5ICYmIHRoaXMuYWRPdmVybGF5LnN1YnNjcmliZSAmJiB0aGlzLmFkT3ZlcmxheS5zdWJzY3JpYmUodGhpcy5vbk92ZXJsYXlFdmVudC5iaW5kKHRoaXMsIEVWRU5UX05BTUUpLCBFVkVOVF9OQU1FKTtcbiAgICB9KTtcblxuICAgIHRoaXMucHVibGlzaChWUEFJREV2ZW50cy5BRF9MT0FERUQpO1xuICB9XG5cbiAgb25DcmVhdGl2ZUV2ZW50KG5hbWUpIHtcbiAgICB0aGlzLnB1Ymxpc2gobmFtZSk7XG4gIH1cblxuICBvbk92ZXJsYXlFdmVudChuYW1lKSB7XG4gICAgdGhpcy5wdWJsaXNoKG5hbWUpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZih0aGlzLmFkICYmIHR5cGVvZiB0aGlzLmFkLmRlc3Ryb3kgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5hZC5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgaWYodGhpcy5hZE92ZXJsYXkgJiYgdHlwZW9mIHRoaXMuYWRPdmVybGF5LmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuYWRPdmVybGF5LmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQgVlBBSURJbnRlcmZhY2UgICAgICAgICAgICBmcm9tICcuL1ZQQUlESW50ZXJmYWNlJztcbmltcG9ydCAqIGFzIFZQQUlERXZlbnRzICAgICAgICAgIGZyb20gJy4vRW51bS9WUEFJREV2ZW50cyc7XG5pbXBvcnQgQmFzZUNyZWF0aXZlICAgICAgICAgICAgICBmcm9tICcuL0NyZWF0aXZlcy9CYXNlQ3JlYXRpdmUnO1xuaW1wb3J0IFZpZGVvQ3JlYXRpdmUgICAgICAgICAgICAgZnJvbSAnLi9DcmVhdGl2ZXMvVmlkZW9DcmVhdGl2ZSc7XG5pbXBvcnQgVGltZUV2ZW50ICAgICAgICAgICAgICAgICBmcm9tICcuL0NyZWF0aXZlcy9UaW1lcnMvVGltZUV2ZW50JztcbmltcG9ydCBUaW1lVXBkYXRlSGFuZGxlciAgICAgICAgIGZyb20gJy4vQ3JlYXRpdmVzL1RpbWVycy9UaW1lVXBkYXRlSGFuZGxlcic7XG5pbXBvcnQgUXVhcnRpbGVUaW1lVXBkYXRlSGFuZGxlciBmcm9tICcuL0NyZWF0aXZlcy9UaW1lcnMvUXVhcnRpbGVUaW1lVXBkYXRlSGFuZGxlcic7XG5pbXBvcnQgQmFzZU92ZXJsYXkgICAgICAgICAgICAgICBmcm9tICcuL092ZXJsYXlzL0Jhc2VPdmVybGF5JztcbmltcG9ydCBDbGlja1Rocm91Z2hPdmVybGF5ICAgICAgIGZyb20gJy4vT3ZlcmxheXMvQ2xpY2tUaHJvdWdoT3ZlcmxheSc7XG5pbXBvcnQgQmFzZVBhcnNlciAgICAgICAgICAgICAgICBmcm9tICcuL1BhcnNlcnMvQmFzZVBhcnNlcic7XG5pbXBvcnQgSlNPTlBhcnNlciAgICAgICAgICAgICAgICBmcm9tICcuL1BhcnNlcnMvSlNPTlBhcnNlcic7XG5cblZQQUlESW50ZXJmYWNlLlZQQUlESW50ZXJmYWNlICAgICAgICAgICAgPSBWUEFJREludGVyZmFjZTtcblZQQUlESW50ZXJmYWNlLlZQQUlERXZlbnRzICAgICAgICAgICAgICAgPSBWUEFJREV2ZW50cztcblZQQUlESW50ZXJmYWNlLkJhc2VDcmVhdGl2ZSAgICAgICAgICAgICAgPSBCYXNlQ3JlYXRpdmU7XG5WUEFJREludGVyZmFjZS5WaWRlb0NyZWF0aXZlICAgICAgICAgICAgID0gVmlkZW9DcmVhdGl2ZTtcblZQQUlESW50ZXJmYWNlLlRpbWVFdmVudCAgICAgICAgICAgICAgICAgPSBUaW1lRXZlbnQ7XG5WUEFJREludGVyZmFjZS5UaW1lVXBkYXRlSGFuZGxlciAgICAgICAgID0gVGltZVVwZGF0ZUhhbmRsZXI7XG5WUEFJREludGVyZmFjZS5RdWFydGlsZVRpbWVVcGRhdGVIYW5kbGVyID0gUXVhcnRpbGVUaW1lVXBkYXRlSGFuZGxlcjtcblZQQUlESW50ZXJmYWNlLkJhc2VPdmVybGF5ICAgICAgICAgICAgICAgPSBCYXNlT3ZlcmxheTtcblZQQUlESW50ZXJmYWNlLkNsaWNrVGhyb3VnaE92ZXJsYXkgICAgICAgPSBDbGlja1Rocm91Z2hPdmVybGF5O1xuVlBBSURJbnRlcmZhY2UuQmFzZVBhcnNlciAgICAgICAgICAgICAgICA9IEJhc2VQYXJzZXI7XG5WUEFJREludGVyZmFjZS5KU09OUGFyc2VyICAgICAgICAgICAgICAgID0gSlNPTlBhcnNlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBWUEFJREludGVyZmFjZTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgVlBBSURJbnRlcmZhY2UgZnJvbSBcIi4uL3NyYy9qcy9pbmRleFwiO1xuaW1wb3J0IENsaWNrVGhyb3VnaE92ZXJsYXkgZnJvbSBcIi4uL3NyYy9qcy9PdmVybGF5cy9DbGlja1Rocm91Z2hPdmVybGF5XCI7XG5pbXBvcnQgKiBhcyBWUEFJREV2ZW50cyBmcm9tIFwiLi4vc3JjL2pzL0VudW0vVlBBSURFdmVudHNcIjtcblxuLy8gdmFyIGJ0bjE7XG4vLyB2YXIgYnRuMjtcbmNvbnN0IEN1c3RvbUNvbnRyb2xzID0gY2xhc3MgZXh0ZW5kcyBDbGlja1Rocm91Z2hPdmVybGF5IHtcbiAgZ2VuZXJhdGVDb250cm9scygpIHtcbiAgICAvL2p1c3QgbWFrZSBhbiBpZnJhbWVcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGxldCBodG1sU3RyID1cbiAgICAgIFwiIDxzdHlsZT5cIiArXG4gICAgICAnICAgICAgQGltcG9ydCB1cmwoXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9UG9wcGluczoyMDAsMzAwLDQwMCw1MDAsNjAwLDcwMCw4MDAsOTAwJmRpc3BsYT1zd2FwXCIpOycgK1xuICAgICAgXCIgICAgICAqIHtcIiArXG4gICAgICBcIiAgICAgICAgbWFyZ2luOiAwO1wiICtcbiAgICAgIFwiICAgICAgICBwYWRkaW5nOiAwO1wiICtcbiAgICAgIFwiICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1wiICtcbiAgICAgICcgICAgICAgIGZvbnQtZmFtaWx5OiBcIlBvcHBpbnNcIiwgc2Fucy1zZXJpZjsnICtcbiAgICAgIFwiICAgICAgfVwiICtcbiAgICAgIFwiXCIgK1xuICAgICAgXCIgICAgICBzZWN0aW9uIHtcIiArXG4gICAgICBcIiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1wiICtcbiAgICAgIFwiICAgICAgICBtYXgtd2lkdGg6IDY0MHB4O1wiICtcbiAgICAgIFwiICAgICAgICBoZWlnaHQ6IDM2MHB4O1wiICtcbiAgICAgIFwiICAgICAgICBkaXNwbGF5OiBmbGV4O1wiICtcbiAgICAgIFwiICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XCIgK1xuICAgICAgXCIgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XCIgK1xuICAgICAgXCIgICAgICAgIGJhY2tncm91bmQ6ICMwMDYyYmU7XCIgK1xuICAgICAgXCIgICAgICAgIHRyYW5zaXRpb246IDAuNXM7XCIgK1xuICAgICAgXCIgICAgICB9XCIgK1xuICAgICAgXCJcIiArXG4gICAgICBcIiAgICAgIC5jb250ZW50IHtcIiArXG4gICAgICBcIiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1wiICtcbiAgICAgIFwiICAgICAgICB3aWR0aDogMTAwJTtcIiArXG4gICAgICBcIiAgICAgICAgaGVpZ2h0OiAxMDAlO1wiICtcbiAgICAgIFwiICAgICAgICBkaXNwbGF5OiBmbGV4O1wiICtcbiAgICAgIFwiICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XCIgK1xuICAgICAgXCIgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XCIgK1xuICAgICAgXCIgICAgICB9XCIgK1xuICAgICAgXCJcIiArXG4gICAgICBcIiAgICAgIC5jb250ZW50IC52aWRlb0JveCB7XCIgK1xuICAgICAgXCIgICAgICAgIG1heC13aWR0aDogMzUwcHg7XCIgK1xuICAgICAgXCIgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcIiArXG4gICAgICBcIiAgICAgICAgdG9wOiAxNSU7XCIgK1xuICAgICAgXCIgICAgICAgIGxlZnQ6IDUlO1wiICtcbiAgICAgIFwiICAgICAgfVwiICtcbiAgICAgIFwiXCIgK1xuICAgICAgXCIgICAgICAuY29udGVudCAudmlkZW9Cb3ggdmlkZW8ge1wiICtcbiAgICAgIFwiICAgICAgICB3aWR0aDogMTAwJTtcIiArXG4gICAgICBcIiAgICAgICAgaGVpZ2h0OiAxMDAlO1wiICtcbiAgICAgIFwiICAgICAgICBvdXRsaW5lOiBub25lO1wiICtcbiAgICAgIFwiICAgICAgfVwiICtcbiAgICAgIFwiXCIgK1xuICAgICAgXCIgICAgICAuY29udGVudCAuaW1nQm94IHtcIiArXG4gICAgICBcIiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wiICtcbiAgICAgIFwiICAgICAgICB0b3A6IDE1JTtcIiArXG4gICAgICBcIiAgICAgICAgcmlnaHQ6IDE1JTtcIiArXG4gICAgICBcIiAgICAgIH1cIiArXG4gICAgICBcIlwiICtcbiAgICAgIFwiICAgICAgLmNvbnRlbnQgLmltZ0JveCBpbWcge1wiICtcbiAgICAgIFwiICAgICAgICBtYXgtd2lkdGg6IDEwMHB4O1wiICtcbiAgICAgIFwiICAgICAgfVwiICtcbiAgICAgIFwiICAgICAgLnRodW1iIHtcIiArXG4gICAgICBcIiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wiICtcbiAgICAgIFwiICAgICAgICBsZWZ0OiA1MCU7XCIgK1xuICAgICAgXCIgICAgICAgIGJvdHRvbTogNXB4O1wiICtcbiAgICAgIFwiICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XCIgK1xuICAgICAgXCIgICAgICAgIGRpc3BsYXk6IGZsZXg7XCIgK1xuICAgICAgXCIgICAgICB9XCIgK1xuICAgICAgXCJcIiArXG4gICAgICBcIiAgICAgIC50aHVtYiBsaSB7XCIgK1xuICAgICAgXCIgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XCIgK1xuICAgICAgXCIgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcIiArXG4gICAgICBcIiAgICAgICAgbWFyZ2luOiAwIDIwcHg7XCIgK1xuICAgICAgXCIgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcIiArXG4gICAgICBcIiAgICAgICAgdHJhbnNpdGlvbjogMC41cztcIiArXG4gICAgICBcIiAgICAgIH1cIiArXG4gICAgICBcIlwiICtcbiAgICAgIFwiICAgICAgLnRodW1iIGxpOmhvdmVyIHtcIiArXG4gICAgICBcIiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xNXB4KTtcIiArXG4gICAgICBcIiAgICAgIH1cIiArXG4gICAgICBcIlwiICtcbiAgICAgIFwiICAgICAgLnRodW1iIGxpIGltZyB7XCIgK1xuICAgICAgXCIgICAgICAgIG1heC13aWR0aDogNDBweDtcIiArXG4gICAgICBcIiAgICAgIH1cIiArXG4gICAgICBcIlwiICtcbiAgICAgIFwiICAgICAgLnNjaSB7XCIgK1xuICAgICAgXCIgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcIiArXG4gICAgICBcIiAgICAgICAgdG9wOiA0MCU7XCIgK1xuICAgICAgXCIgICAgICAgIHJpZ2h0OiAzMHB4O1wiICtcbiAgICAgIFwiICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XCIgK1xuICAgICAgXCIgICAgICAgIGRpc3BsYXk6IGZsZXg7XCIgK1xuICAgICAgXCIgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1wiICtcbiAgICAgIFwiICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1wiICtcbiAgICAgIFwiICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1wiICtcbiAgICAgIFwiICAgICAgfVwiICtcbiAgICAgIFwiXCIgK1xuICAgICAgXCIgICAgICAuc2NpIGxpIHtcIiArXG4gICAgICBcIiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcIiArXG4gICAgICBcIiAgICAgIH1cIiArXG4gICAgICBcIlwiICtcbiAgICAgIFwiICAgICAgLnNjaSBsaSBhIHtcIiArXG4gICAgICBcIiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1wiICtcbiAgICAgIFwiICAgICAgICBmaWx0ZXI6IGludmVydCgxKTtcIiArXG4gICAgICBcIiAgICAgICAgbWFyZ2luOiA1cHggMDtcIiArXG4gICAgICBcIiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjYpO1wiICtcbiAgICAgIFwiICAgICAgfVwiICtcbiAgICAgIFwiICAgIDwvc3R5bGU+XCIgK1xuICAgICAgJzxzZWN0aW9uIGNsYXNzPVwic2VjXCI+JyArXG4gICAgICAnICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj4nICtcbiAgICAgICcgICAgICAgIDxkaXYgY2xhc3M9XCJ2aWRlb0JveFwiPicgK1xuICAgICAgXCIgICAgICAgICAgPHZpZGVvIGNsYXNzPSd0ZWt0b2tfdmlkX3Nsb3QnIGNyb3Nzb3JpZ2luPSdhbm9ueW1vdXMnIGF1dG9wbGF5IG11dGVkIGNvbnRyb2xzPlwiICtcbiAgICAgIFwiICAgICAgICAgICAgPHNvdXJjZVwiICtcbiAgICAgICcgICAgICAgICAgICAgIHNyYz1cImh0dHBzOi8vZ2l0aHViLmNvbS9yb25hbGQxMzIvc3BvdHgvcmF3L21hc3Rlci92aWRlb3MvUGVwc2klMjBCbGFjay5tcDRcIicgK1xuICAgICAgXCIgICAgICAgICAgICAvPlwiICtcbiAgICAgIFwiICAgICAgICAgIDwvdmlkZW8+XCIgK1xuICAgICAgXCIgICAgICAgIDwvZGl2PlwiICtcbiAgICAgICcgICAgICAgIDxkaXYgY2xhc3M9XCJpbWdCb3hcIj4nICtcbiAgICAgIFwiICAgICAgICAgIDxpbWdcIiArXG4gICAgICAnICAgICAgICAgICAgc3JjPVwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3JvbmFsZDEzMi9zcG90eC9tYXN0ZXIvaW1hZ2VzL3BlcHNpMDAxLnBuZ1wiJyArXG4gICAgICAnICAgICAgICAgICAgYWx0PVwiXCInICtcbiAgICAgICcgICAgICAgICAgICBjbGFzcz1cInBlcHNpXCInICtcbiAgICAgIFwiICAgICAgICAgIC8+XCIgK1xuICAgICAgXCIgICAgICAgIDwvZGl2PlwiICtcbiAgICAgIFwiICAgICAgPC9kaXY+XCIgK1xuICAgICAgJyAgICAgIDx1bCBjbGFzcz1cInRodW1iXCI+JyArXG4gICAgICBcIiAgICAgICAgPGxpPlwiICtcbiAgICAgIFwiICAgICAgICAgIDxpbWcgaWQ9J2ltZ1RodW1iMSdcIiArXG4gICAgICAnICAgICAgICAgICAgc3JjPVwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3JvbmFsZDEzMi9zcG90eC9tYXN0ZXIvaW1hZ2VzL3BlcHNpMDAxLnBuZ1wiJyArXG4gICAgICAnICAgICAgICAgICAgYWx0PVwiXCInICtcbiAgICAgIFwiICAgICAgICAgIC8+XCIgK1xuICAgICAgXCIgICAgICAgIDwvbGk+XCIgK1xuICAgICAgXCIgICAgICAgIDxsaT5cIiArXG4gICAgICBcIiAgICAgICAgICA8aW1nIGlkPSdpbWdUaHVtYjInXCIgK1xuICAgICAgJyAgICAgICAgICAgIHNyYz1cImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9yb25hbGQxMzIvc3BvdHgvbWFzdGVyL2ltYWdlcy9wZXBzaTAwMi5wbmdcIicgK1xuICAgICAgJyAgICAgICAgICAgIGFsdD1cIlwiJyArXG4gICAgICBcIiAgICAgICAgICAvPlwiICtcbiAgICAgIFwiICAgICAgICA8L2xpPlwiICtcbiAgICAgIFwiICAgICAgICA8bGk+XCIgK1xuICAgICAgXCIgICAgICAgICAgPGltZyBpZD0naW1nVGh1bWIzJ1wiICtcbiAgICAgICcgICAgICAgICAgICBzcmM9XCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcm9uYWxkMTMyL3Nwb3R4L21hc3Rlci9pbWFnZXMvcGVwc2kwMDMucG5nXCInICtcbiAgICAgICcgICAgICAgICAgICBhbHQ9XCJcIicgK1xuICAgICAgXCIgICAgICAgICAgLz5cIiArXG4gICAgICBcIiAgICAgICAgPC9saT5cIiArXG4gICAgICBcIiAgICAgIDwvdWw+XCIgK1xuICAgICAgJyAgICAgIDx1bCBjbGFzcz1cInNjaVwiPicgK1xuICAgICAgXCIgICAgICAgIDxsaT5cIiArXG4gICAgICAnICAgICAgICAgIDxhIGhyZWY9XCIjXCInICtcbiAgICAgIFwiICAgICAgICAgICAgPjxpbWdcIiArXG4gICAgICAnICAgICAgICAgICAgICBzcmM9XCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcm9uYWxkMTMyL3Nwb3R4L21hc3Rlci9pbWFnZXMvZmFjZWJvb2sucG5nXCInICtcbiAgICAgICcgICAgICAgICAgICAgIGFsdD1cIlwiJyArXG4gICAgICBcIiAgICAgICAgICAvPjwvYT5cIiArXG4gICAgICBcIiAgICAgICAgPC9saT5cIiArXG4gICAgICBcIiAgICAgICAgPGxpPlwiICtcbiAgICAgICcgICAgICAgICAgPGEgaHJlZj1cIiNcIicgK1xuICAgICAgXCIgICAgICAgICAgICA+PGltZ1wiICtcbiAgICAgICcgICAgICAgICAgICAgIHNyYz1cImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9yb25hbGQxMzIvc3BvdHgvbWFzdGVyL2ltYWdlcy90d2l0dGVyLnBuZ1wiJyArXG4gICAgICAnICAgICAgICAgICAgICBhbHQ9XCJcIicgK1xuICAgICAgXCIgICAgICAgICAgLz48L2E+XCIgK1xuICAgICAgXCIgICAgICAgIDwvbGk+XCIgK1xuICAgICAgXCIgICAgICAgIDxsaT5cIiArXG4gICAgICAnICAgICAgICAgIDxhIGhyZWY9XCIjXCInICtcbiAgICAgIFwiICAgICAgICAgICAgPjxpbWdcIiArXG4gICAgICAnICAgICAgICAgICAgICBzcmM9XCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcm9uYWxkMTMyL3Nwb3R4L21hc3Rlci9pbWFnZXMvaW5zdGFncmFtLnBuZ1wiJyArXG4gICAgICAnICAgICAgICAgICAgICBhbHQ9XCJcIicgK1xuICAgICAgXCIgICAgICAgICAgLz48L2E+XCIgK1xuICAgICAgXCIgICAgICAgIDwvbGk+XCIgK1xuICAgICAgXCIgICAgICA8L3VsPlwiICtcbiAgICAgIFwiICAgIDwvc2VjdGlvbj5cIjtcblxuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sU3RyO1xuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxufTtcblxuLy8gbGV0IHZpZGVvcyA9IHdpbmRvdy50b3AuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ2aWRlb1wiKTtcbi8vIGNvbnNvbGUubG9nKHZpZGVvcyk7XG5cbmNvbnN0IGluc3RhbmNlID0gbmV3IFZQQUlESW50ZXJmYWNlKHtcbiAgb3ZlcmxheXM6IEN1c3RvbUNvbnRyb2xzLFxuICB3aW5kb3c6IHdpbmRvdyxcbn0pO1xuXG5mdW5jdGlvbiBpbWdTbGlkZXIoYW55dGhpbmcpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wZXBzaVwiKS5zcmMgPSBhbnl0aGluZztcbn1cblxuZnVuY3Rpb24gY2hhbmdlQmdDb2xvcihjb2xvcikge1xuICBjb25zdCBzZWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlY1wiKTtcbiAgc2VjLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvcjtcbn1cblxuaW5zdGFuY2Uuc3Vic2NyaWJlKChldnQpID0+IHtcbiAgY29uc29sZS5sb2coXCJhZCBpcyBsb2FkZWRcIik7XG4gIGNvbnN0IHZpZFNsb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRla3Rva192aWRfc2xvdFwiKTtcblxuICBpbnN0YW5jZS5hZC52aWRlb0VsID0gdmlkU2xvdDtcbiAgaW5zdGFuY2UuYWQudmlkZW9FbC5wbGF5KCk7XG5cbiAgY29uc3QgaW1nVGh1bWIxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWdUaHVtYjFcIik7XG4gIGltZ1RodW1iMS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaW1nU2xpZGVyKFxuICAgICAgXCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcm9uYWxkMTMyL3Nwb3R4L21hc3Rlci9pbWFnZXMvcGVwc2kwMDEucG5nXCIsXG4gICAgKTtcbiAgICBjaGFuZ2VCZ0NvbG9yKFwiIzAwNjJiZVwiKTtcbiAgfTtcbiAgY29uc3QgaW1nVGh1bWIyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWdUaHVtYjJcIik7XG4gIGltZ1RodW1iMi5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaW1nU2xpZGVyKFxuICAgICAgXCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcm9uYWxkMTMyL3Nwb3R4L21hc3Rlci9pbWFnZXMvcGVwc2kwMDIucG5nXCIsXG4gICAgKTtcbiAgICBjaGFuZ2VCZ0NvbG9yKFwiI2U2MGMyY1wiKTtcbiAgfTtcbiAgY29uc3QgaW1nVGh1bWIzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWdUaHVtYjNcIik7XG4gIGltZ1RodW1iMy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaW1nU2xpZGVyKFxuICAgICAgXCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcm9uYWxkMTMyL3Nwb3R4L21hc3Rlci9pbWFnZXMvcGVwc2kwMDMucG5nXCIsXG4gICAgKTtcbiAgICBjaGFuZ2VCZ0NvbG9yKFwiIzFlMWUxZVwiKTtcbiAgfTtcbn0sIFZQQUlERXZlbnRzLkFEX0xPQURFRCk7XG5cbmluc3RhbmNlLnN1YnNjcmliZSgoZXZ0KSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiYWQgaXMgc3RhcnRlZFwiKTtcbn0sIFZQQUlERXZlbnRzLkFEX1NUQVJURUQpO1xuXG5pbnN0YW5jZS5zdWJzY3JpYmUoKGV2dCkgPT4ge1xuICBjb25zb2xlLmxvZyhcImFkIGlzIGF0IGZpcnN0cXVhcnRpbGVcIik7XG59LCBWUEFJREV2ZW50cy5BRF9WSURFT19GSVJTVF9RVUFSVElMRSk7XG5cbmluc3RhbmNlLnN1YnNjcmliZSgoZXZ0KSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiYWQgaXMgYXQgbWlkcG9pbnRcIik7XG59LCBWUEFJREV2ZW50cy5BRF9WSURFT19NSURQT0lOVCk7XG5cbmluc3RhbmNlLnN1YnNjcmliZSgoZXZ0KSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiYWQgaXMgYXQgdGhpcmRxdWFydGlsZVwiKTtcbn0sIFZQQUlERXZlbnRzLkFEX1ZJREVPX1RISVJEX1FVQVJUSUxFKTtcblxuaW5zdGFuY2Uuc3Vic2NyaWJlKChldnQpID0+IHtcbiAgY29uc29sZS5sb2coXCJhZCBpcyBjb21wbGV0ZVwiKTtcbn0sIFZQQUlERXZlbnRzLkFEX1ZJREVPX0NPTVBMRVRFKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=